<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <title>ç¥ç³çš„å¿«ä¹æ˜ŸçƒğŸŒ </title>
  <link rel="stylesheet" href="./static/css/reset.css" />
  <link rel="stylesheet" href="./index.css" />
  <!-- å¼•å…¥ Vue 2 çš„ CDN é“¾æ¥ -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
</head>

<body>
  <div id="app">
    <!-- å¤´éƒ¨-->
    <iframe src="./components/headerNav/headerNav.html" scrolling="no"></iframe>

    <!-- çˆ±å¿ƒåŠ¨ç”» -->
    <iframe v-if="isLoveShow" src="./page/love/love.html" scrolling="no"></iframe>

    <!-- ç”Ÿæ´»æ—¥å¸¸ -->
    <!-- <iframe v-if="isLifeShow" src="./page/life/life.html" scrolling="no"></iframe> -->

    <!-- åº•éƒ¨ -->
    <iframe v-if="isFooterShow" src="./components/footer/footer.html" scrolling="no"></iframe>

  </div>


  <script>
    new Vue({
      el: '#app',
      data: {
        headerIframe: null,
        loveIframe: null,
        lifeIframe: null,
        isLoveShow: false,
        isLifeShow: false,
        isFooterShow: false,
      },
      methods: {

      },
      created() {
        // åœ¨çˆ¶é¡µé¢æ¥æ”¶æ¶ˆæ¯
        window.addEventListener('message', event => {
          console.log('æ”¶åˆ°å­é¡µé¢æ¶ˆæ¯---ï¼š', event.data);
          if (event.data.type === 'headerNav') {
            this.isLoveShow = true;
          }
          if (event.data.type === 'love') {
            this.isFooterShow = true;
          }
        });
      },
      mounted() {
        // åœ¨çˆ¶é¡µé¢ï¼ˆindex.htmlï¼‰ä¸­å‘é€æ¶ˆæ¯ é€šè¿‡ src å±æ€§é€‰æ‹©ç‰¹å®šçš„ iframe
        this.headerIframe = document.querySelector('iframe[src*="headerNav"]');
        this.loveIframe = document.querySelector('iframe[src*="love"]');
        this.lifeIframe = document.querySelector('iframe[src*="life"]');

        // å‘ä¸åŒçš„ iframe å‘é€æ¶ˆæ¯
        // headerIframe.contentWindow.postMessage({ type: 'header', message: 'Hello header!' }, '*');
        // loveIframe.contentWindow.postMessage({ type: 'love', message: 'Hello love!' }, '*');
        // lifeIframe.contentWindow.postMessage({ type: 'life', message: 'Hello life!' }, '*');
      }
    });
  </script>
</body>

</html>