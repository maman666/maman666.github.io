webpackJsonp([1],{0:function(e,t,a){a("j1ja"),e.exports=a("NHnr")},"0/cj":function(e,t){},"0C90":function(e,t){},"2cVt":function(e,t){},"3M2O":function(e,t){},"4H7A":function(e,t){},"5mJR":function(e,t){},"5t1e":function(e,t){},"7/l3":function(e,t){},C7oe:function(e,t){},Coz6:function(e,t){},D7Pd:function(e,t){},EPrh:function(e,t){},Fgpe:function(e,t){},FhM4:function(e,t){},Ml1W:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var n=a("VU/8")({name:"App"},s,!1,function(e){a("x1X6")},null,null).exports,r=a("/ocq"),l={name:"HomemadePagination",props:{pageSize:{type:Number,default:6},total:{type:Number,required:!0},current:{type:Number,default:1}},data:function(){return{inputVal:1}},computed:{max:function(){return 0!==this.total?Math.ceil(this.total/this.pageSize):1}},watch:{current:function(e,t){this.inputVal=e}},methods:{Jump:function(e){(e=Number(e))!==this.current&&(e<1?(e=1,this.inputVal=1):e>this.max&&(e=this.max,this.inputVal=this.max),this.$emit("CurChange",e))}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"homemade-pagination"},[a("el-button",{attrs:{type:"info",plain:"",disabled:e.current<=1},on:{click:function(t){return e.Jump(1)}}},[e._v("首页")]),e._v(" "),a("el-button",{staticClass:"prev",attrs:{type:"info",plain:"",disabled:e.current<=1},on:{click:function(t){return e.Jump(e.current-1)}}}),e._v(" "),a("div",{staticClass:"pager"},[e._v(e._s(Number(e.current)+" / "+e.max))]),e._v(" "),a("el-button",{staticClass:"next",attrs:{type:"info",plain:"",disabled:e.current>=e.max},on:{click:function(t){return e.Jump(e.current+1)}}}),e._v(" "),a("el-button",{attrs:{type:"info",plain:"",disabled:e.current>=e.max},on:{click:function(t){return e.Jump(e.max)}}},[e._v("尾页")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off",min:"1",max:e.max},domProps:{value:e.inputVal},on:{input:function(t){t.target.composing||(e.inputVal=t.target.value)}}}),e._v(" "),a("el-button",{attrs:{type:"info",plain:""},on:{click:function(t){return e.Jump(e.inputVal)}}},[e._v("跳转")])],1)},staticRenderFns:[]};var u={getCookie:function(e){var t=new RegExp("(^| )"+e+"(?:=([^;]*))?(;|$)"),a=document.cookie.match(t);return a?a[2]?unescape(a[2]):"":null}},c={components:{HomemadePagination:a("VU/8")(l,o,!1,function(e){a("kO+K")},"data-v-37e4b8d8",null).exports},name:"ComplianceHomepage",data:function(){return{complianceUrl:this.$store.state.complianceList.complianceUrl,tableLoading:!0,pageSize:6,current:1,tableData:[],total:0}},created:function(){this.GetTableData()},computed:{mchid:function(){return u.getCookie("merchant_code")||1900012651}},mounted:function(){},methods:{Operate:function(e,t,a,i){if(console.log(e,t,a,i),"操作"===t.label){var s=void 0;if("2"===e.status||"3"===e.status||"4"===e.status){if("4"===e.status)localStorage.setItem("FRejectReason",e.FRejectReason),localStorage.setItem("pushType","1"===e.type?1:2),s="ResultAudit";else{var n=null;"1"===e.type?(s="InspectionListPreview",n&&n.send({common_log:"InspectionListCheck"})):(s="SurveyRatingPreview",n&&n.send({common_log:"SurveyRatingCheck"}))}localStorage.setItem("hideSubmit","4"!==e.status)}else"1"===e.type?(s="InspectionList",n&&n.send({common_log:"InspectionListWrite"})):(s="SurveyRating",n&&n.send({common_log:"SurveyRatingWrite"})),"1"!==localStorage.getItem("internalStsa"+e.id)&&localStorage.setItem("internalStsa"+e.id,2),"1"!==localStorage.getItem("credisStsa"+e.id)&&localStorage.setItem("credisStsa"+e.id,2),"1"!==localStorage.getItem("manageStsa"+e.id)&&localStorage.setItem("manageStsa"+e.id,2),"1"!==localStorage.getItem("personalStsa"+e.id)&&localStorage.setItem("personalStsa"+e.id,2),"1"!==localStorage.getItem("RiskControlStsa"+e.id)&&localStorage.setItem("RiskControlStsa"+e.id,2),"1"!==localStorage.getItem("business"+e.id)&&localStorage.setItem("business"+e.id,2),localStorage.setItem("hideSubmit",!1);localStorage.setItem("previewRecordId",e.recordId),localStorage.setItem("statusId",e.id),this.$router.push(s)}},cellStyle:function(e){var t=e.row;e.column,e.rowIndex;return 4===e.columnIndex&&"4"===t.status?"color: red":""},CurChange:function(e){this.current=e,this.GetTableData()},formatterColumn:function(e,t){switch(t.label){case"单据类型":return"1"===e.type?"非现场检查单":"尽职调查/评级";case"操作状态":return["未填写","待审核","已审核","已驳回"][e.status-1];case"操作":return["填写","查看","查看","查看"][e.status-1];default:return""}},GetTableData:function(){var e=this;this.tableLoading=!0;var t={mchid:this.mchid,page:this.current,limit:this.pageSize};this.$axios.get(this.complianceUrl,{params:t}).then(function(t){console.log("请求成功:",t),t&&t.data&&"0"===t.data.return_code?(e.tableData=t.data.lists,e.total=Number(t.data.total)):(console.log("请求失败：",t),e.tableData=[],e.total=0,e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0}))}).catch(function(t){console.log("res:",t),e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试!",type:"error",center:!0})}).finally(function(){e.tableLoading=!1})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"compliance-homepage"},[a("h2",{staticClass:"sub-heading"},[e._v("合规管理")]),e._v(" "),a("div",{staticClass:"compliance-list"},[a("div",{staticClass:"compliance-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],ref:"singleTable",attrs:{data:e.tableData,"highlight-current-row":"","cell-style":e.cellStyle},on:{"cell-click":e.Operate}},[a("el-table-column",{attrs:{label:"单据号",property:"id"}}),e._v(" "),a("el-table-column",{attrs:{label:"单据类型",formatter:e.formatterColumn}}),e._v(" "),a("el-table-column",{attrs:{label:"服务商商户号",property:"merchantCode",width:"190"}}),e._v(" "),a("el-table-column",{attrs:{label:"服务商名称",property:"companyName"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作状态",formatter:e.formatterColumn,width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",formatter:e.formatterColumn,width:"160","class-name":"operating"}})],1)],1),e._v(" "),e.total?a("HomemadePagination",{attrs:{"page-size":e.pageSize,total:e.total,current:e.current},on:{CurChange:e.CurChange}}):e._e()],1)])},staticRenderFns:[]};var p=a("VU/8")(c,m,!1,function(e){a("VNk9"),a("7/l3")},"data-v-57359a9f",null).exports,v=a("mvHQ"),d=a.n(v),g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"step-bar"},[a("div",{staticClass:"step-head"},e._l(e.stepArr,function(t,i){return"complete"==t.status?a("div",{key:i,staticClass:"step-head-item",class:t.status},[a("div",{staticClass:"step-line"}),e._v(" "),a("div",{staticClass:"step-icon"})]):a("span",{key:i,staticClass:"step-head-item",class:t.status},[a("div",{staticClass:"step-line"}),e._v(" "),a("div",{staticClass:"step-icon"})])}),0),e._v(" "),a("div",{staticClass:"step-main"},e._l(e.stepArr,function(t,i){return a("div",{key:i,staticClass:"step-main-item",class:t.status},[a("div",{staticClass:"step-text"},[a("h4",[e._v(e._s(t.title))]),e._v(" "),a("p",[e._v(e._s(t.text))])]),e._v(" "),a("div",{staticClass:"step-operat",on:{click:function(a){return e.FillIn(t.path)}}},[e._v(e._s(t.operat))])])}),0)])},staticRenderFns:[]};var h=a("VU/8")({name:"StepBar",props:["stepArr","FillIn"],data:function(){return{}}},g,!1,function(e){a("Z/SZ")},"data-v-17139b34",null).exports,f={name:"ControlButton",props:{type:{default:null,type:String},backNum:{default:-1},nextPath:{type:String},isDisabled:{default:!0,type:Boolean},isLoading:{type:Boolean,default:!1},hideSubmit:{default:!1,type:Boolean},save:{type:Function,default:function(){}},sa:{type:Function,default:function(){}},saveToback:{type:Function,default:function(){}},saveSubmit:{type:Function,default:function(){this.$router.push({name:"ResultSubmitted",params:{status:1}})}}},data:function(){return{}},methods:{Toback:function(){this.$router.go(this.backNum)},TobackHome:function(){this.$router.push("/serviceProvideCheck")},NextPage:function(){!1!==this.save()&&this.$router.push(this.nextPath)}}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"control-button"},["SaveToback"==e.type?a("div",[a("el-button",{attrs:{type:"info",plain:""},on:{click:e.saveToback}},[e._v("保存并返回")]),e._v(" "),a("el-button",{attrs:{type:"success",disabled:e.isDisabled},on:{click:e.saveSubmit}},[e._v("预览")])],1):"SaveSubmit"==e.type?a("div",[a("el-button",{attrs:{type:"success",disabled:e.isDisabled,loading:e.isLoading},on:{click:e.saveSubmit}},[e._v(e._s(e.isLoading?"正在提交":"保存并提交"))])],1):"ConfirmSubmit"==e.type?a("div",[a("el-button",{attrs:{type:"info",plain:""},on:{click:e.Toback}},[e._v(e._s(e.hideSubmit?"返回":"上一步"))]),e._v(" "),e.hideSubmit?e._e():a("el-button",{attrs:{type:"success",disabled:e.isDisabled,loading:e.isLoading},on:{click:e.saveSubmit}},[e._v(e._s(e.isLoading?"正在提交":"确认提交"))])],1):"ToBack"==e.type?a("div",[a("el-button",{attrs:{type:"info",plain:""},on:{click:e.TobackHome}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"success",disabled:e.isDisabled,loading:e.isLoading},on:{click:e.saveSubmit}},[e._v(e._s(e.isLoading?"正在提交":"保存并提交"))])],1):a("div",[a("el-button",{attrs:{type:"info",plain:""},on:{click:e.Toback}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{type:"info",plain:""},on:{click:e.save}},[e._v("保存草稿")]),e._v(" "),a("el-button",{attrs:{type:"success",disabled:e.isDisabled},on:{click:e.NextPage}},[e._v("下一步")])],1)])},staticRenderFns:[]};var b=a("VU/8")(f,y,!1,function(e){a("ws7m")},null,null).exports,D={components:{StepBar:h,ControlButton:b},data:function(){return{stas:!1,getInspectionUrl:this.$store.state.complianceList.getInspectionUrl,saveInspectionUrl:this.$store.state.complianceList.saveInspectionUrl,ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,isLoading:!1,reminder:"",inspectionListData:{}}},computed:{recordId:function(){return localStorage.getItem("previewRecordId")},enterpriseInfoStatus:function(){var e=!0,t=["companyName","companyNature","agentCertificateType","agentCertificateCode","legalName","legalCertificateType","legalCertificateCode","agentSignTime","agentCertificateStartTime","agentCertificatePlace","companyPlace"];for(var a in t)this.inspectionListData[t[a]]||(e=!1);return e},inspectionListStatus:function(){return!!this.stas&&!!(this.inspectionListData.legalImage&&this.inspectionListData.institutionCertificateImage&&this.enterpriseInfoStatus&&this.inspectionListData.worksiteImage)},worksiteImageStatus:function(){var e=!1,t=this.inspectionListData.worksiteImage;if(t){var a=0;t.replace(/([;，])/g,function(e){return a++,e}),3===a&&(e=!0)}return this.stas=e,e},stepArr:function(){var e=!1;return void 0!==this.inspectionListData.legalFileListObj&&void 0!==this.inspectionListData.mechanismObj&&0!==this.inspectionListData.legalFileListObj.length&&1===this.inspectionListData.mechanismObj.length&&(e=!0),[{title:"资质信息",text:"请上传法定代表人（负责人）及机构证件影印件",status:e&&this.inspectionListData.institutionCertificateImage?"complete":"",operat:e&&this.inspectionListData.institutionCertificateImage?"已完成":"去填写",path:"QualificationInfo"},{title:"企业信息",text:"请填写公司及服务商相关信息",status:this.enterpriseInfoStatus?"complete":"",operat:this.enterpriseInfoStatus?"已完成":"去填写",path:"EnterpriseInfo"},{title:"检查照片",text:"请上传办公现场检查照片",status:this.worksiteImageStatus?"complete":"",operat:this.worksiteImageStatus?"已完成":"去填写",path:"InspectionPhotos"}]}},watch:{},created:function(){var e=this,t=JSON.parse(localStorage.getItem("inspectionListData"))||{};if(t.id!==this.recordId){var a={recordId:this.recordId};this.$axios.get(this.getInspectionUrl,{params:a}).then(function(t){if(t&&t.data&&"0"===t.data.return_code){var a=t.data.list;a.statusId=localStorage.getItem("statusId"),e.inspectionListData=a,e.inspectionListData.agentCertificateType="1",a.worksiteImageUrl&&""!==a.worksiteImageUrl&&(e.inspectionListData.fileListObj=JSON.parse(a.worksiteImageUrl)),a.institutionCertificateImageUrl&&""!==a.institutionCertificateImageUrl&&(e.inspectionListData.mechanismObj=JSON.parse(a.institutionCertificateImageUrl)),a.legalImageUrl&&""!==a.legalImageUrl&&(e.inspectionListData.legalFileListObj=JSON.parse(a.legalImageUrl)),localStorage.setItem("inspectionListData",d()(a))}else e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0})}).catch(function(t){e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})})}else this.inspectionListData=t},methods:{FillIn:function(e){this.$router.push(e)},SaveSubmit:function(){var e=this;if(this.isLoading=!0,"0"!==this.inspectionListData.companyNature)if("0"!==this.inspectionListData.agentCertificateType)if("1970-01-01 00:00:01"!==this.inspectionListData.agentSignTime)if(""!==this.inspectionListData.agentCertificatePlace)if(""!==this.inspectionListData.companyPlace)if(this.stas){var t=new FormData;for(var a in this.inspectionListData)t.append(a,this.inspectionListData[a]);t.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(this.saveInspectionUrl,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.isLoading=!1,t&&t.data&&"0"===t.data.return_code?(sessionStorage.setItem("submitStatus",!0),e.$router.push("ResultSubmitted")):(sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"请查看数据是否填写完整,或请刷新页面重试",type:"error",center:!0}))}).catch(function(t){e.isLoading=!1,sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"请查看数据是否填写完整,或请刷新页面重试",type:"error",center:!0})});null}else this.$message.error("请上传三张公司实际办公地图片");else this.$message.error("请填写公司实际办公地");else this.$message.error("请填写服务商证照注册地");else this.$message.error("请选择服务商签约时间");else this.$message.error("请选择服务商证照类型");else this.$message.error("请选择公司性质")}}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inspection-list"},[a("h2",{staticClass:"sub-heading"},[e._v("非现场检查单")]),e._v(" "),e.reminder?a("el-alert",{attrs:{title:e.reminder,type:"warning","show-icon":""}}):e._e(),e._v(" "),a("div",{staticClass:"inspection-main"},[a("h3",{staticClass:"sub-heading"},[e._v("必填信息")]),e._v(" "),a("div",{staticClass:"required-list"},[a("StepBar",{attrs:{stepArr:e.stepArr,FillIn:e.FillIn}})],1),e._v(" "),a("ControlButton",{attrs:{type:"ToBack","is-disabled":!e.inspectionListStatus,"is-loading":e.isLoading,"save-submit":e.SaveSubmit}})],1)],1)},staticRenderFns:[]};var S=a("VU/8")(D,R,!1,function(e){a("3M2O"),a("kd7V")},"data-v-515151de",null).exports,k={name:"FileUploadMore",props:{name:{default:""},previewUrl:{type:String,default:""},title:{required:!0,type:String},isRiequired:{default:!1},isPreview:{type:Boolean,default:!1},actionUrl:{default:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/uploadImage?ishttp=1"},listType:{default:"file"},fileListProp:{type:Array,default:function(){return[]}},handleAvatarSuccess:{type:Function},tipText:{default:"图片建议尺寸:128X128像素,大小不超过1M,支持JPG、PNG格式"},fileLimit:{type:Number,default:10}},data:function(){return{ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,has:!1,dialogImageUrl:"",dialogVisible:!1,fileLength:0}},mounted:function(){this.has=Boolean(this.fileListProp.length===this.fileLimit)},created:function(){this.fileList=JSON.parse(d()(this.fileListProp))},watch:{isPreview:{handler:function(e,t){this.fileList=JSON.parse(d()(this.fileListProp)),this.has=Boolean(this.fileListProp.length===this.fileLimit)}},fileListProp:{handler:function(e,t){this.has=Boolean(this.fileListProp.length===this.fileLimit)}}},methods:{handleChange:function(e,t){this.fileList.length=t.length},beforeAvatarUpload:function(e){return"picture-card"===this.listType&&"image/jpg"!==e.type&&"image/gif"!==e.type&&"image/png"!==e.type&&"image/jpeg"!==e.type?(this.$message({type:"error",message:"支持jpg, jpeg, png, gif格式图片上传"}),!1):"picture-card"!==this.listType&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"text/plain"!==e.type&&"application/vnd.ms-excel"!==e.type?(this.$message({type:"error",message:"支持word, excel, pdf, txt格式文件上传"}),!1):e.size>2097152?(this.$message({type:"error",message:"上传的文件大小需在2M以内"}),!1):0!==e.size||(this.$message({type:"error",message:"请不要上传空文件"}),!1)},uploadFile:function(e,t){var a=this;this.has=!0;var i=new FormData;i.append("img",e.file),i.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(e.action,i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t&&0!==parseInt(t.data.return_code)?(a.$message.error(t.data.return_msg),a.has=!1,e.onError()):(e.onSuccess(t.data),a.has=Boolean(a.fileListProp.length===a.fileLimit))}).catch(function(){a.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0}),a.has=!1,e.onError()})},handleAvatarError:function(e,t){},handlePreview:function(e){"picture-card"===this.listType?(this.dialogImageUrl=e.url,this.dialogVisible=!0):window.location.href=e.url?e.url:e.response.furl},beforeRemove:function(e,t){},handleRemove:function(e,t){this.fileList=t,this.has=!1,this.$emit("fileRemove",e,t)}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-upload"},[a("strong",{class:{riequired:e.isRiequired}},[e._v(e._s(e.title))]),e._v(" "),a("el-upload",{ref:"upload",class:{disabled:e.has},style:"picture-card"==e.listType?"height: 128px;":"",attrs:{"list-type":e.listType,limit:e.fileLimit,"auto-upload":!0,action:e.actionUrl,"file-list":e.fileList,"on-change":e.handleChange,"http-request":e.uploadFile,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove}},["picture-card"==e.listType?a("i",{staticClass:"el-icon-plus"}):a("el-button",{attrs:{type:"info",plain:""}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传文件")]),e._v(" "),"none"!==e.tipText?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tipText))]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var I=a("VU/8")(k,C,!1,function(e){a("Ml1W")},null,null).exports,L={components:{FileUploadMore:I,ControlButton:b},data:function(){return{fileLimit:2,fileLimitOne:1,title:"法定代表人（负责人）证件影印件",isRiequired:!0,name:"请上传法定代表人（负责人）证件影印件（身份证需上传正反面）",institutitle:"机构证件影印件",instituname:"institutionCertificateImage",actionUrl:this.$store.state.complianceList.fileUploadUrl,nextPath:"EnterpriseInfo",inspectionListData:JSON.parse(localStorage.getItem("inspectionListData")),legalFileListObj:[],mechanismObj:[],qualificationStatus:!1}},computed:{legalPerson:function(){var e=[];if(this.legalFileListObj.length>0)e=this.legalFileListObj;else for(var t in this.inspectionListData.legalFileListObj)e.push({name:this.inspectionListData.legalFileListObj[t]?this.inspectionListData.legalFileListObj[t].name:"",url:this.inspectionListData.legalFileListObj[t]?this.inspectionListData.legalFileListObj[t].url:""});return e},mechanism:function(){var e=[];if(this.mechanismObj.length>0)e=this.mechanismObj;else for(var t in this.inspectionListData.mechanismObj)e.push({name:this.inspectionListData.mechanismObj[t].name?this.inspectionListData.mechanismObj[t].name:"",url:this.inspectionListData.mechanismObj[t].url?this.inspectionListData.mechanismObj[t].url:""});return e}},created:function(){void 0!==this.inspectionListData.legalFileListObj&&void 0!==this.inspectionListData.mechanismObj&&(this.qualificationStatus=Boolean(this.inspectionListData.legalFileListObj.length)&&Boolean(this.inspectionListData.mechanismObj.length))},methods:{legalSuccess:function(e){this.inspectionListData.legalImage+=e.fname+";",this.inspectionListData.legalImageUrl=e.furl,this.legalFileListObj=this.legalPerson.length>0?this.legalPerson:[],this.legalFileListObj.push({name:e.fname,url:e.furl}),this.inspectionListData.legalFileListObj=this.legalFileListObj,localStorage.setItem("inspectionListData",d()(this.inspectionListData)),void 0!==this.inspectionListData.legalFileListObj&&void 0!==this.inspectionListData.mechanismObj&&(this.qualificationStatus=Boolean(this.inspectionListData.legalFileListObj.length)&&Boolean(this.inspectionListData.mechanismObj.length))},mechanismSuccess:function(e){this.inspectionListData.institutionCertificateImage+=e.fname+";",this.inspectionListData.institutionCertificateImageUrl=e.furl,this.mechanismObj=this.mechanism.length>0?this.mechanism:[],this.mechanismObj.push({name:e.fname,url:e.furl}),this.inspectionListData.mechanismObj=this.mechanismObj,localStorage.setItem("inspectionListData",d()(this.inspectionListData)),void 0!==this.inspectionListData.legalFileListObj&&void 0!==this.inspectionListData.mechanismObj&&(this.qualificationStatus=Boolean(this.inspectionListData.legalFileListObj.length)&&Boolean(this.inspectionListData.mechanismObj.length))},fileRemove:function(e,t,a){switch(parseInt(a)){case 1:for(var i in this.inspectionListData.legalFileListObj)e.response?this.inspectionListData.legalFileListObj[i].name===e.response.fname&&this.inspectionListData.legalFileListObj.splice(i,1):this.inspectionListData.legalFileListObj[i].name===e.name&&this.inspectionListData.legalFileListObj.splice(i,1);var s="";for(var n in this.inspectionListData.legalFileListObj)s+=this.inspectionListData.legalFileListObj[n].name+";";this.inspectionListData.legalImage=s;break;case 2:for(var r in this.inspectionListData.mechanismObj)e.response?this.inspectionListData.mechanismObj[r].name===e.response.fname&&this.inspectionListData.mechanismObj.splice(r,1):this.inspectionListData.mechanismObj[r].name===e.name&&this.inspectionListData.mechanismObj.splice(r,1);var l="";for(var o in this.inspectionListData.mechanismObj)l+=this.inspectionListData.mechanismObj[o].name+";";this.inspectionListData.institutionCertificateImage=l}localStorage.setItem("inspectionListData",d()(this.inspectionListData)),void 0!==this.inspectionListData.legalFileListObj&&void 0!==this.inspectionListData.mechanismObj&&(this.qualificationStatus=Boolean(this.inspectionListData.legalFileListObj.length)&&Boolean(this.inspectionListData.mechanismObj.length))},Save:function(){localStorage.setItem("inspectionListData",d()(this.inspectionListData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0})}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"qualification-info"},[a("h2",{staticClass:"sub-heading"},[e._v("资质信息")]),e._v(" "),a("div",{staticClass:"qualification-main"},[a("div",{staticClass:"qualification-item"},[a("FileUploadMore",{class:{disabled:!1},attrs:{title:e.title,"file-limit":e.fileLimit,"is-riequired":e.isRiequired,"tip-text":"请上传法定代表人（负责人）证件影印件（身份证需上传正反面）",name:e.name,"list-type":"picture-card","action-url":e.actionUrl,"file-list-prop":e.legalPerson,"handle-avatar-success":e.legalSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,1)}}})],1),e._v(" "),a("div",{staticClass:"qualification-item",staticStyle:{padding:"24px 0 16px 0","margin-bottom":"40px"}},[a("FileUploadMore",{attrs:{title:e.institutitle,"is-riequired":e.isRiequired,"file-limit":e.fileLimitOne,"tip-text":"请上传机构证件的影印件",name:e.instituname,"list-type":"picture-card","action-url":e.actionUrl,"file-list-prop":e.mechanism,"handle-avatar-success":e.mechanismSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,2)}}})],1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.qualificationStatus,save:e.Save}})],1)])},staticRenderFns:[]};var T=a("VU/8")(L,_,!1,function(e){a("Fgpe"),a("oAPB")},"data-v-fda92b28",null).exports,x={name:"InputComponent",props:{formData:{required:!0,type:Array},isInput:{default:!0}},methods:{valueText:function(e){return Array.isArray(e.value)?e.value[0]+" - "+e.value[1]:"select"===e.valueType?e.valText[e.value]:"radio"===e.valueType?"1"===e.value?"是":"否":e.value},fileDownload:function(e){console.log(e,"12312321")}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"input-component"},e._l(e.formData,function(t,i){return a("div",{key:i,staticClass:"input-component-item",class:"主要职责 "===t.title||"高级管理人员职务 "===t.title?"topBoder":"",style:"picture-card"===t.valueType?"display: none;":""},[a("strong",{class:{riequired:t.isRiequired&&e.isInput}},[e._v(e._s(t.title))]),e._v(" "),e.isInput||"file"!==t.valueType||t.url?!e.isInput&&"files"===t.valueType&&t.url?e._l(t.value,function(i,s){return a("span",{key:s,staticClass:"file-preview"},[t.value?a("div",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}},[a("a",{attrs:{href:i.url,target:"_blank"}},[e._v(" "+e._s(i.name))])]):e._e()])}):e.isInput||"filesteam"!==t.valueType?e.isInput?"date"===t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):"daterange"===t.valueType?a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):"number"===t.valueType?a("el-input",{attrs:{placeholder:t.isRiequired?"请输入":"(选填) 请输入",type:"number",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):"radio"===t.valueType?a("el-radio-group",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},[a("el-radio",{attrs:{label:"1"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("否")])],1):"select"===t.valueType?a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}},e._l(t.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value,"value-key":e.value}})}),1):"textarea"===t.valueType?a("el-input",{attrs:{rows:"15",type:"textarea",placeholder:"(选填)请输入",maxlength:"300","show-word-limit":"",resize:"none"},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):a("el-input",{attrs:{placeholder:t.isRiequired?"请输入":"(选填) 请输入",clearable:""},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"item.value"}}):a("span",[e._v(e._s(e.valueText(t)))]):a("span",{staticClass:"file-preview"},[a("a",{attrs:{href:t.url,target:"_blank"}},[e._v(" "+e._s(t.value))])]):a("span",{staticClass:"file-preview",on:{click:function(a){return e.fileDownload(t.url)}}},[t.value?a("div",{staticClass:"el-icon-document",staticStyle:{"margin-right":"6px"}}):e._e(),e._v(e._s(t.value)+"\n    ")])],2)}),0)},staticRenderFns:[]};var O=a("VU/8")(x,F,!1,function(e){a("VViQ")},null,null).exports,$={components:{InputComponent:O,ControlButton:b},data:function(){return{inspectionListData:JSON.parse(localStorage.getItem("inspectionListData")),keyStr:{companyName:"服务商名称",companyNature:"公司性质",agentCertificateType:"服务商证照类型",agentCertificateCode:"服务商证照编号",legalName:"法定代表人（负责人）姓名",legalCertificateType:"法定代表人（负责人）证件类型",legalCertificateCode:"法定代表人（负责人）证件号码",agentSignTime:"服务商签约时间",agentCertificateStartTime:"服务商证照有效期(经营起始时间)",agentCertificatePlace:"服务商证照注册地",companyPlace:"公司实际办公地",businessScope:"经营范围"},unfillData:[],unfillForm:{},fillData:[],fillForm:{},formRules:{companyName:[{required:!0,message:"请输入服务商名称",trigger:"blur"}],companyNature:[{required:!0,message:"请选择公司性质",trigger:"change"}],agentCertificateType:[{required:!0,message:"请选择服务商证照类型",trigger:"change"}],agentCertificateCode:[{required:!0,message:"请输入服务商证照编号",trigger:"blur"}],legalName:[{required:!0,message:"请输入法定代表人（负责人）姓名",trigger:"blur"}],legalCertificateType:[{required:!0,message:"请选择法定代表人（负责人）证件类型",trigger:"change"}],legalCertificateCode:[{required:!0,message:"请输入法定代表人（负责人）证件号码",trigger:"blur"}],agentSignTime:[{required:!0,message:"请选择日期",trigger:"blur"},{required:!0,message:"请选择日期",trigger:"change"}],agentCertificateStartTime:[{required:!0,message:"请选择日期",trigger:"blur"},{required:!0,message:"请选择日期",trigger:"change"}],agentCertificatePlace:[{required:!0,message:"请输入服务商证照注册地",trigger:"blur"}],companyPlace:[{required:!0,message:"请输入公司实际办公地",trigger:"blur"}],businessScope:[{required:!1,message:"请输入经营范围",trigger:"blur"}]},isInput:!1,initFillForm:"",nextPath:"InspectionPhotos"}},computed:{enterpriseInfoStatus:function(){var e=!0;for(var t in this.keyStr)this.inspectionListData[t]||"businessScope"===t||(e=!1);return e}},watch:{unfillForm:{handler:function(e,t){this.Update(e)},immediate:!1,deep:!0},fillForm:{handler:function(e,t){this.Update(e)},immediate:!1,deep:!0}},created:function(){for(var e in this.keyStr){var t={title:this.keyStr[e],value:this.inspectionListData[e],key:e,isRiequired:!0,valueType:"text"};switch("businessScope"===e&&(t.isRiequired=!1),e){case"companyNature":t.valText=["","国有企业","民营企业","个体企业","外资企业","港澳台企业、中外合资企业","其他"],"0"===t.value&&(t.value=""),t.options=[{text:"国有企业",value:"1"},{text:"民营企业",value:"2"},{text:"个体企业",value:"3"},{text:"外资企业",value:"4"},{text:"港澳台企业、中外合资企业",value:"5"},{text:"其他",value:"6"}],t.valueType="select";break;case"agentCertificateType":t.valText=["","营业执照"],"0"===t.value&&(t.value=""),t.options=[{text:"营业执照",value:"1"}],t.valueType="select";break;case"legalCertificateType":t.valText=["身份证","护照"],t.options=[{text:"身份证",value:"0"},{text:"护照",value:"1"}],t.valueType="select";break;case"agentSignTime":"1970-01-01 00:00:01"===t.value?t.value="":t.value=t.value.slice(0,10),t.valueType="date";break;case"agentCertificateStartTime":t.title="服务商证照有效期","1970-01-01 00:00:01"===this.inspectionListData.agentCertificateStartTime||""===this.inspectionListData.agentCertificateStartTime||"1970-01-01 00:00:01"===this.inspectionListData.agentCertificateEndTime||""===this.inspectionListData.agentCertificateEndTime?t.value=[]:t.value=[this.inspectionListData.agentCertificateStartTime.slice(0,10),this.inspectionListData.agentCertificateEndTime.slice(0,10)],t.valueType="daterange";break;case"agentCertificatePlace":case"companyPlace":t.placehoder="例如：广东省深圳市南山区海天2路33号"}t.value?this.fillData.push(t):this.unfillData.push(t)}var a={},i={};for(var s in this.unfillData)a[this.unfillData[s].key]=this.unfillData[s].value;for(var n in this.fillData)i[this.fillData[n].key]=this.fillData[n].value;this.unfillForm=a,this.fillForm=i},methods:{valueText:function(e,t){return Array.isArray(t)?t[0]+" - "+t[1]:"select"===e.valueType?e.valText[t]:"radio"===e.valueType?"1"===t?"是":"否":t},InputEnable:function(){if(this.isInput){this.fillForm=JSON.parse(this.initFillForm);var e=this;setTimeout(function(){e.$refs.fillForm.validate(function(e){if(!e)return!1})},50)}else this.initFillForm=d()(this.fillForm);this.isInput=!this.isInput},Save:function(){this.isInput=!1,localStorage.setItem("inspectionListData",d()(this.inspectionListData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0})},Update:function(e){for(var t in e)"agentCertificateStartTime"===t?(this.inspectionListData.agentCertificateStartTime=e[t]&&e[t][0]?e[t][0]+" 00:00:01":"",this.inspectionListData.agentCertificateEndTime=e[t]&&e[t][1]?e[t][1]+" 00:00:01":""):"agentSignTime"===t?this.inspectionListData.agentSignTime=e[t]?e[t]+" 00:00:01":"":this.inspectionListData[t]=e[t]}}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"enterprise-info"},[a("h2",{staticClass:"sub-heading"},[e._v("企业信息")]),e._v(" "),a("div",{staticClass:"enterprise-main"},[e.unfillData.length?a("h3",{staticClass:"sub-heading"},[e._v("待填项")]):e._e(),e._v(" "),a("el-form",{ref:"unfillForm",staticClass:"unfill-form",attrs:{model:e.unfillForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.unfillData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["select"==t.valueType?a("el-select",{model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}}):"daterange"===t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}}):a("el-input",{attrs:{placeholder:t.placehoder},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}})],1)}),1),e._v(" "),a("h3",{staticClass:"sub-heading"},[e._v("已填项")]),e._v(" "),a("div",{staticClass:"input-enable",on:{click:e.InputEnable}},[e._v(e._s(e.isInput?"取消修改":"修改"))]),e._v(" "),a("div",{staticClass:"filled"},[a("el-form",{ref:"fillForm",staticClass:"fill-form",attrs:{model:e.fillForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.fillData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},[e.isInput?"select"==t.valueType?a("el-select",{model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):"daterange"===t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):a("el-input",{model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):a("p",[e._v(e._s(e.valueText(t,e.fillForm[t.key])))])],1)}),1)],1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,save:e.Save,"is-disabled":!e.enterpriseInfoStatus}})],1)])},staticRenderFns:[]};var P=a("VU/8")($,w,!1,function(e){a("yyIf")},"data-v-27f51c15",null).exports,j={components:{FileUploadMore:I,ControlButton:b},name:"InspectionPhotos",data:function(){return{inspectionListData:JSON.parse(localStorage.getItem("inspectionListData")),title:"办公现场照片",isRiequired:!0,actionUrl:this.$store.state.complianceList.fileUploadUrl,tipText:"需上传三张照片，分别为前台、办公场所、和悬挂的营业执照,图片建议尺寸:128X128像素,大小不超过2M,支持JPG、PNG格式",nextPath:"InspectionList",previewPath:"InspectionListPreview",fileListObj:[],fileLimit:3}},computed:{fileList:function(){var e=[];if(this.fileListObj.length>0)e=this.fileListObj;else for(var t in this.inspectionListData.fileListObj)e.push({name:this.inspectionListData.fileListObj[t]?this.inspectionListData.fileListObj[t].name:"",url:this.inspectionListData.fileListObj[t]?this.inspectionListData.fileListObj[t].url:""});return e}},methods:{handleAvatarSuccess:function(e){this.inspectionListData.worksiteImage+=e.fname+";",this.inspectionListData.worksiteImageUrl+=e.furl+";",this.fileListObj=this.fileList.length>0?this.fileList:[],this.fileListObj.push({name:e.fname,url:e.furl}),this.inspectionListData.fileListObj=this.fileListObj,localStorage.setItem("inspectionListData",d()(this.inspectionListData))},fileRemove:function(e,t){for(var a in this.inspectionListData.fileListObj)e.response?this.inspectionListData.fileListObj[a].name===e.response.fname&&this.inspectionListData.fileListObj.splice(a,1):this.inspectionListData.fileListObj[a].name===e.name&&this.inspectionListData.fileListObj.splice(a,1);var i="",s="";for(var n in this.inspectionListData.fileListObj)i+=this.inspectionListData.fileListObj[n].name+";",s+=this.inspectionListData.fileListObj[n].url+";";this.inspectionListData.worksiteImage=i,this.inspectionListData.worksiteImageUrl=s,localStorage.setItem("inspectionListData",d()(this.inspectionListData))},SaveToback:function(){localStorage.setItem("inspectionListData",d()(this.inspectionListData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),this.$router.push(this.nextPath)},SaveSubmit:function(){localStorage.setItem("inspectionListData",d()(this.inspectionListData)),this.$router.push(this.previewPath)}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inspection-photos"},[a("h2",{staticClass:"sub-heading"},[e._v("检查照片")]),e._v(" "),a("div",{staticClass:"inspection-main"},[a("FileUploadMore",{attrs:{title:e.title,"is-riequired":e.isRiequired,"file-limit":e.fileLimit,"list-type":"picture-card","action-url":e.actionUrl,"file-list-prop":e.fileList,"tip-text":e.tipText,"handle-avatar-success":e.handleAvatarSuccess},on:{fileRemove:e.fileRemove}}),e._v(" "),a("ControlButton",{attrs:{type:"SaveToback","next-path":e.nextPath,"is-disabled":3!==e.fileList.length,"save-toback":e.SaveToback,"save-submit":e.SaveSubmit}})],1)])},staticRenderFns:[]};var U=a("VU/8")(j,N,!1,function(e){a("y4IC")},"data-v-244d2850",null).exports,q={name:"FileUpload",props:{name:{default:""},previewUrl:{type:String,default:""},title:{required:!0,type:String},isRiequired:{default:!1},fileLimit:{type:Number,default:3},isPreview:{type:Boolean,default:!1},actionUrl:{default:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/uploadImage?ishttp=1"},listType:{default:"file"},fileListProp:{type:Array,default:function(){return[]}},handleAvatarSuccess:{type:Function},tipText:{default:"图片建议尺寸:128X128像素,大小不超过1M,支持JPG、PNG格式"}},data:function(){return{ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,has:!1,dialogImageUrl:"",dialogVisible:!1}},created:function(){this.has=Boolean(this.fileListProp.length),this.fileList=JSON.parse(d()(this.fileListProp))},computed:{},watch:{isPreview:{handler:function(e,t){this.fileList=JSON.parse(d()(this.fileListProp))}},fileListProp:{handler:function(e,t){this.has=Boolean(this.fileListProp.length)}}},mounted:function(){this.has=Boolean(this.fileListProp.length)},methods:{handleChange:function(e,t){},beforeAvatarUpload:function(e){return"picture-card"===this.listType&&"image/jpg"!==e.type&&"image/gif"!==e.type&&"image/png"!==e.type&&"image/jpeg"!==e.type?(this.$message({type:"error",message:"支持jpg, jpeg, png, gif格式图片上传"}),!1):"picture-card"!==this.listType&&"application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==e.type&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!==e.type&&"application/pdf"!==e.type&&"text/plain"!==e.type&&"application/vnd.ms-excel"!==e.type?(this.$message({type:"error",message:"支持word, excel, pdf, txt格式文件上传"}),!1):e.size>2097152?(this.$message({type:"error",message:"上传的文件大小需在2M以内"}),!1):0!==e.size||(this.$message({type:"error",message:"请不要上传空文件"}),!1)},uploadFile:function(e){var t=this,a=new FormData;a.append("img",e.file),a.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(e.action,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){a&&0!==parseInt(a.data.return_code)?(t.$message.error(a.data.return_msg),t.has=!1,e.onError()):e.onSuccess(a.data)}).catch(function(){t.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0}),t.has=!1,e.onError()})},handleAvatarError:function(e,t){},handlePreview:function(e){"picture-card"===this.listType?(this.dialogImageUrl=e.url,this.dialogVisible=!0):window.location.href=e.url?e.url:e.response.furl},beforeRemove:function(e,t){},handleRemove:function(e,t){this.fileList=t,this.has=!1,this.$emit("fileRemove",this.name,t)}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-upload"},[a("strong",{class:{riequired:e.isRiequired}},[e._v(e._s(e.title))]),e._v(" "),e.isPreview?a("img",{staticClass:"img-preview",attrs:{src:e.previewUrl,alt:""}}):a("el-upload",{ref:"upload",class:{disabled:e.has},style:"picture-card"==e.listType?"height: 128px;":"",attrs:{"list-type":e.listType,multiple:"",limit:e.fileLimit,"auto-upload":!0,action:e.actionUrl,"file-list":e.fileList,"on-change":e.handleChange,"http-request":e.uploadFile,"before-upload":e.beforeAvatarUpload,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"on-preview":e.handlePreview,"before-remove":e.beforeRemove,"on-remove":e.handleRemove}},["picture-card"==e.listType?a("i",{staticClass:"el-icon-plus"}):a("el-button",{attrs:{type:"info",plain:""}},[a("i",{staticClass:"el-icon-upload"}),e._v("上传文件")]),e._v(" "),"none"!==e.tipText?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tipText))]):e._e()],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var M=a("VU/8")(q,E,!1,function(e){a("5mJR")},null,null).exports,A={name:"SurveyRatingPreview",components:{InputComponent:O,FileUpload:M,ControlButton:b},data:function(){return{imgInfo:{},imgSrc:"",height:"",dialogVisible:!1,fileList:[],inspecList:[],inspectionPhotosList:[],getInspectionUrl:this.$store.state.complianceList.getInspectionUrl,saveInspectionUrl:this.$store.state.complianceList.saveInspectionUrl,inspectionListData:{},hideSubmit:JSON.parse(localStorage.getItem("hideSubmit")),ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,isLoading:!1}},computed:{recordId:function(){return localStorage.getItem("previewRecordId")},companyInfo:function(){return{h3Text:"公司信息",list:[{title:"公司性质",value:this.inspectionListData.companyNature,valText:["","国有企业","民营企业","个体企业","外资企业","港澳台企业、中外合资企业","其他"],valueType:"select"},{title:"公司实际办公地",value:this.inspectionListData.companyPlace,isRiequired:!1,valueType:"text"},{title:"经营范围",value:this.inspectionListData.businessScope,isRiequired:!1,valueType:"text"},{title:"法定代表人（负责人）姓名",value:this.inspectionListData.legalName,valueType:"text"},{title:"法定代表人（负责人）证件类型",value:this.inspectionListData.legalCertificateType,valText:["身份证","护照"],valueType:"select"},{title:"法定代表人（负责人）证件号码",value:this.inspectionListData.legalCertificateCode,valueType:"text"}]}},serviceProviderInfo:function(){return{h3Text:"服务商信息",list:[{title:"服务商名称",value:this.inspectionListData.companyName,valueType:"text"},{title:"服务商证照类型",value:this.inspectionListData.agentCertificateType,valText:["","营业执照","组织机构代码证"],valueType:"select"},{title:"服务商证照编号",value:this.inspectionListData.agentCertificateCode,valueType:"text"},{title:"服务商签约时间",value:this.inspectionListData.agentSignTime?this.inspectionListData.agentSignTime.slice(0,10):"",isRiequired:!0,valueType:"date"},{title:"服务商证照有效期",value:[this.inspectionListData.agentCertificateStartTime?this.inspectionListData.agentCertificateStartTime.slice(0,10):"",this.inspectionListData.agentCertificateEndTime?this.inspectionListData.agentCertificateEndTime.slice(0,10):""],isRiequired:!1,valueType:"daterange"},{title:"服务商证照注册地",value:this.inspectionListData.agentCertificatePlace,isRiequired:!1,valueType:"text"}]}}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("inspectionListData"))||{};if(t.id!==this.recordId){var a={recordId:this.recordId};this.$axios.get(this.getInspectionUrl,{params:a}).then(function(t){if(t&&t.data&&"0"===t.data.return_code){var a=t.data.list;a.statusId=localStorage.getItem("statusId"),e.inspectionListData=a,a.legalFileListObj=e.fileList=""!==e.inspectionListData.legalImageUrl?JSON.parse(e.inspectionListData.legalImageUrl):"",a.mechanismObj=e.inspecList=""!==e.inspectionListData.institutionCertificateImageUrl?JSON.parse(e.inspectionListData.institutionCertificateImageUrl):"",a.fileListObj=e.inspectionPhotosList=""!==e.inspectionListData.worksiteImageUrl?JSON.parse(e.inspectionListData.worksiteImageUrl):"",localStorage.setItem("inspectionListData",d()(a)),console.log(e.fileList)}else e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0})}).catch(function(t){e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})})}else this.inspectionListData=t,this.fileList=this.inspectionListData.legalFileListObj,this.inspecList=this.inspectionListData.mechanismObj,this.inspectionPhotosList=this.inspectionListData.fileListObj},destroyed:function(){},methods:{privueImg:function(e){this.imgSrc="",this.height=700;var t=new Image;t.src=e;var a=this;t.onload=function(){var i=t.height?t.height:600,s=t.width?t.width:600;console.log("heighty:",i),console.log("width:",s),a.height=i/s*700,a.imgSrc=e},this.dialogVisible=!0},SaveSubmit:function(){var e=this;if(void 0!==this.inspectionListData.legalFileListObj)if(0!==this.inspectionListData.legalFileListObj.length)if(void 0!==this.inspectionListData.mechanismObj)if(1===this.inspectionListData.mechanismObj.length)if("0"!==this.inspectionListData.companyNature)if("0"!==this.inspectionListData.agentCertificateType)if("1970-01-01 00:00:01"!==this.inspectionListData.agentSignTime)if(""!==this.inspectionListData.agentCertificatePlace)if(""!==this.inspectionListData.companyPlace){this.isLoading=!0;var t=new FormData;for(var a in this.inspectionListData)t.append(a,this.inspectionListData[a]);t.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(this.saveInspectionUrl,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.isLoading=!1,t&&t.data&&"0"===t.data.return_code?(sessionStorage.setItem("submitStatus",!0),e.$router.push("ResultSubmitted")):(sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0}))}).catch(function(t){e.isLoading=!1,sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"请查看数据是否填写完整,或请刷新页面重试",type:"error",center:!0})});null}else this.$message.error("请填写公司实际办公地");else this.$message.error("请填写服务商证照注册地");else this.$message.error("请选择服务商签约时间");else this.$message.error("请选择服务商证照类型");else this.$message.error("请选择公司性质");else this.$message.error("请上传机构证件影印件");else this.$message.error("请上传法定代表人（负责人）证件影印件（身份证需上传正反面）");else this.$message.error("请上传法定代表人（负责人）证件影印件（身份证需上传正反面）");else this.$message.error("请上传法定代表人（负责人）证件影印件（身份证需上传正反面）")}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inspection-list-preview-preview"},[a("h2",{staticClass:"sub-heading"},[e._v("非现场检查单预览")]),e._v(" "),a("div",{staticClass:"preview-main",attrs:{id:"qualificationInfo"}},[a("h2",{staticClass:"sub-heading"},[e._v("资质信息")]),e._v(" "),a("div",{staticClass:"preview-item"},[a("strong",{staticClass:"ston"},[e._v("法定代表人（负责人）证件影印件:")]),e._v(" "),e._l(e.fileList,function(t,i){return a("img",{key:i,staticClass:"elimage",attrs:{title:"法定代表人（负责人）证件影印件（正反面)",src:t.url},on:{click:function(a){return e.privueImg(t.url)}}})})],2),e._v(" "),a("div",{staticClass:"preview-item"},[a("strong",{staticClass:"ston inspecelimage"},[e._v("机构证件影印件:")]),e._v(" "),e._l(e.inspecList,function(t,i){return a("img",{key:i,staticClass:"elimage",attrs:{title:"机构证件影印件",src:t.url},on:{click:function(a){return e.privueImg(t.url)}}})})],2)]),e._v(" "),a("div",{staticClass:"preview-main",attrs:{id:"serviceProviderInfo"}},[a("h2",{staticClass:"sub-heading"},[e._v("企业信息")]),e._v(" "),a("div",{staticClass:"preview-item"},[a("h3",{staticClass:"sub-heading"},[e._v(e._s(e.companyInfo.h3Text))]),e._v(" "),a("InputComponent",{attrs:{"form-data":e.companyInfo.list,"is-input":!1}})],1),e._v(" "),a("div",{staticClass:"preview-item"},[a("h3",{staticClass:"sub-heading"},[e._v(e._s(e.serviceProviderInfo.h3Text))]),e._v(" "),a("InputComponent",{attrs:{"form-data":e.serviceProviderInfo.list,"is-input":!1}})],1),e._v(" "),a("div",{staticClass:"preview-item"},[a("h3",{staticClass:"sub-heading",staticStyle:{width:"100%"}},[e._v("检查照片")]),e._v(" "),e._m(0),e._v(" "),e._l(e.inspectionPhotosList,function(t,i){return a("img",{key:i,staticClass:"elimage",attrs:{title:"办公现场照片",src:t.url},on:{click:function(a){return e.privueImg(t.url)}}})})],2),e._v(" "),a("ControlButton",{staticClass:"btn-back",attrs:{type:"ConfirmSubmit","is-disabled":!1,"is-loading":e.isLoading,"hide-submit":e.hideSubmit,"save-submit":e.SaveSubmit}}),e._v(" "),a("el-dialog",{attrs:{id:"imgRate",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!0,width:"700px",height:e.height},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{src:e.imgSrc,alt:"",width:"700px",height:e.height}})])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("strong",{staticClass:"ston"},[this._v("办公现场照片")])])}]};var V=a("VU/8")(A,B,!1,function(e){a("V4EN"),a("lxH/")},null,null).exports,J={components:{StepBar:h,ControlButton:b},data:function(){return{fla:0,getSurveyRatingUrl:this.$store.state.complianceList.getSurveyRatingUrl,saveSurveyRatingUrl:this.$store.state.complianceList.saveSurveyRatingUrl,ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,surveyRatingData:{},isLoading:!1}},mounted:function(){"1"===localStorage.getItem("internalStsa")&&(this.fla=1)},computed:{recordId:function(){return localStorage.getItem("previewRecordId")},operatingConditionStatus:function(){var e=Boolean(this.surveyRatingData.legalImage)&&Boolean(this.surveyRatingData.legalImage),t=["companyName","companyType","companyCode","businessLicensePlace","legalName","legalCertificateCode","contactName","contactTel"];for(var a in t)this.surveyRatingData[t[a]]||(e=!1);return e},managementTeamStatus:function(){var e=localStorage.getItem("statusId");return"1"===localStorage.getItem("manageStsa"+e)},financialStatus:function(){return Boolean(this.surveyRatingData.isRegisteredCapitalCoin&&this.surveyRatingData.isStatementAudit&&this.surveyRatingData.financialStatement)},internalControlStatus:function(){var e=!0,t=localStorage.getItem("statusId");if("1"!==localStorage.getItem("internalStsa"+t))return!1;var a=["isOrganizationSound","isInternalControlSound","isAntiMoneyLaundering","isRiskManagementSound","isSecuritySound","isEmergencySound","isSupportSound"];for(var i in a)this.surveyRatingData[a[i]]||(e=!1);return e},creditStatusStatus:function(){var e=!0,t=localStorage.getItem("statusId"),a=localStorage.getItem("credisStsa"+t),i=["litigationNumber","litigationMoney","undoneLitigationNumber","undoneLitigationMoney"];if("1"===this.surveyRatingData.isMajorLitigation)for(var s in i)this.surveyRatingData[i[s]]&&"1"===a||(e=!1);else if("1"!==a)return!1;return e},professionalCompetenceStatus:function(){var e=!0,t=["contractStartTime","cooperationScope","cooperationPlace","serviceStaffNumber","merchantNumber","machineNumber","companyWorkYear","seniorManagerNumber"];for(var a in t)this.surveyRatingData[t[a]]||(e=!1);return e},businessComplianceStatus:function(){var e=!0,t=localStorage.getItem("statusId");if("1"!==localStorage.getItem("business"+t))return!1;var a=["conformanceStaffNumber","isConformanceDepartment","isConformanceRegulation","isConformanceProcess"];for(var i in a)this.surveyRatingData[a[i]]&&""!==this.surveyRatingData.conformanceStaffNumber||(e=!1);return e},personalInfoProtectionStatus:function(){var e=!0,t=localStorage.getItem("statusId");if("1"!==localStorage.getItem("personalStsa"+t))return!1;var a=["isSecurityAttestation","isInformationManagement","isInformationProcess","isStaffMaintainSecrecy","isHierachicalAuthorize","isInfomationEncryption","isSecrecyAudit","isSecrecyDangerCheck"];for(var i in a)this.surveyRatingData[a[i]]||(e=!1);return e},riskControlAbilityStatus:function(){var e=!0,t=localStorage.getItem("statusId"),a=localStorage.getItem("RiskControlStsa"+t),i=["riskHappenedNumber","isMchRiskHappened","swindleMoney","swindleRatio"];if("1"===this.surveyRatingData.isRiskHappened)for(var s in i)this.surveyRatingData[i[s]]&&"1"===a||(e=!1);else if("1"!==a)return!1;return e},stepArr:function(){return[{title:"经营状况",text:"请填写公司经营状况相关信息",status:this.operatingConditionStatus?"complete":"",operat:this.operatingConditionStatus?"已完成":"去填写",path:"OperatingConditions"},{title:"管理团队",text:"请填写公司管理团队相关信息",status:this.managementTeamStatus?"complete":"",operat:this.managementTeamStatus?"已完成":"去填写",path:"ManagementTeam"},{title:"财务状况",text:"请填写公司财务状况相关信息",status:this.financialStatus?"complete":"",operat:this.financialStatus?"已完成":"去填写",path:"FinancialStatus"},{title:"内控水平",text:"请填写公司内控水平相关信息",status:this.internalControlStatus?"complete":"",operat:this.internalControlStatus?"已完成":"去填写",path:"InternalControl"},{title:"信用状况",text:"请填写公司信用状况相关信息",status:this.creditStatusStatus?"complete":"",operat:this.creditStatusStatus?"已完成":"去填写",path:"CreditStatus"},{title:"专业能力",text:"请填写公司专业能力相关信息",status:this.professionalCompetenceStatus?"complete":"",operat:this.professionalCompetenceStatus?"已完成":"去填写",path:"ProfessionalCompetence"},{title:"业务合规",text:"请填写公司业务合规相关信息",status:this.businessComplianceStatus?"complete":"",operat:this.businessComplianceStatus?"已完成":"去填写",path:"BusinessCompliance"},{title:"个人信息保护",text:"请填写公司个人信息保护相关信息",status:this.personalInfoProtectionStatus?"complete":"",operat:this.personalInfoProtectionStatus?"已完成":"去填写",path:"PersonalInfoProtection"},{title:"风控能力",text:"请填写公司风控能力相关信息",status:this.riskControlAbilityStatus?"complete":"",operat:this.riskControlAbilityStatus?"已完成":"去填写",path:"RiskControlAbility"}]},surveyRatingStatus:function(){var e=!0;for(var t in this.stepArr)"complete"!==this.stepArr[t].status&&(e=!1);return e},additiaonalInfo:function(){return{title:"补充信息",text:"根据实际审核情况,额外要求商家提供指定的补充资料",status:this.surveyRatingData.agentSuggestion?"complete":"",operat:this.surveyRatingData.agentSuggestion?"已完成":"去填写",path:"OtherComments"}}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("surveyRatingData"))||{};if(t.recordId!==this.recordId){var a={recordId:this.recordId};this.$axios.get(this.getSurveyRatingUrl,{params:a}).then(function(t){if(console.log("请求成功",t),t&&t.data&&"0"===t.data.return_code){var a=t.data.list;a.recordId=e.recordId,a.statusId=localStorage.getItem("statusId"),console.log("list:",a),a.institutionNumber="",a.isConformanceText="",a.isRegisteredCapitalCoin="0",a.lastYearCashRatio="",a.lastYearDebtRatio="",a.lastYearCapitalRatio="",a.lastYearAccountRatio="",a.lastYearGainRatio="",a.capitalDebtRatio="",e.surveyRatingData=a,localStorage.setItem("surveyRatingData",d()(a))}else e.$message.closeAll(),e.$message({message:t.data.return_msg?t.data.return_msg:"数据返回错误",type:"error",center:!0})}).catch(function(t){e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})})}else this.surveyRatingData=t},methods:{FillIn:function(e){this.$router.push(e)},SaveSubmit:function(){var e=this;if("11"!=this.surveyRatingData.cooperationScope||""!=this.surveyRatingData.otherBusiness){this.isLoading=!0;var t=new FormData;for(var a in this.surveyRatingData)t.append(a,this.surveyRatingData[a]);t.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(this.saveSurveyRatingUrl,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){e.isLoading=!1,t&&t.data&&"0"===t.data.return_code?(sessionStorage.setItem("submitStatus",!0),e.$router.push("ResultSubmitted")):(sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0}))}).catch(function(t){e.isLoading=!1,sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})});null}else this.$message.error("请填写专业能力的其他业务范围")}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"survey-rating"},[a("h2",{staticClass:"sub-heading"},[e._v("尽职调查/评级")]),e._v(" "),a("div",{staticClass:"survey-rating-main"},[a("h3",{staticClass:"sub-heading"},[e._v("必填信息")]),e._v(" "),a("div",{staticClass:"required-list"},[a("StepBar",{attrs:{stepArr:e.stepArr,FillIn:e.FillIn}})],1),e._v(" "),a("h3",{staticClass:"sub-heading"},[e._v("其他信息")]),e._v(" "),a("div",{staticClass:"additiaonal-info-item",class:e.additiaonalInfo.status},[a("div",{staticClass:"step-text"},[a("h4",[e._v(e._s(e.additiaonalInfo.title))]),e._v(" "),a("p",[e._v(e._s(e.additiaonalInfo.text))])]),e._v(" "),a("div",{staticClass:"step-operat",on:{click:function(t){return e.FillIn(e.additiaonalInfo.path)}}},[e._v(e._s(e.additiaonalInfo.operat))])]),e._v(" "),a("ControlButton",{attrs:{type:"ToBack","is-disabled":!e.surveyRatingStatus,"is-loading":e.isLoading,"save-submit":e.SaveSubmit}})],1)])},staticRenderFns:[]};var H=a("VU/8")(J,Y,!1,function(e){a("0C90")},"data-v-d204447a",null).exports;function G(e,t,a){""===t?a():(-1!=t.indexOf(".")&&t.length>17?a(new Error("长度不能超过16位")):-1==t.indexOf(".")&&t.length>16&&a(new Error("长度不能超过16位")),/^(([1-9]{1}\d*)|([0]{1}))(\.(\d){1,2})?$/.test(t)?(t.split(".").length>2?a(new Error("请输入正确格式的数据")):a(),a()):a(new Error("请输入长度不能超过16位的数字，并最多保留两位小数")))}function z(e,t,a){""===t?a():(-1!=t.indexOf(".")&&t.length>17?a(new Error("长度不能超过16位")):-1==t.indexOf(".")&&t.length>16&&a(new Error("长度不能超过16位")),/^(0|[1-9][0-9]*|-[1-9][0-9]*)(\.(\d){1,2})?$/.test(t)?(t.split(".").length>2?a(new Error("请输入正确格式的数据")):a(),a()):a(new Error("请输入长度不能超过16位的数字，并最多保留两位小数")))}function W(e,t,a,i){""===e?i():(-1!=e.indexOf(".")&&e.length>17?i(new Error("长度不能超过16位")):-1==e.indexOf(".")&&e.length>16&&i(new Error("长度不能超过16位")),/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,2})?$/.test(e)?(console.log("length:",e.split(".").length),e.split(".").length>2?i(new Error("请输入正确格式的数据")):i(),i()):i(new Error("请输入正确数字，并最多保留两位小数"))),e.length>t?i(new Error(a)):i()}function Q(e,t,a){""===t||void 0===t||null==t?a():/^[+]{0,1}(\d+)$/.test(t)?a():a(new Error("请输入正整数"))}function K(e,t,a){if(""===t||void 0===t||null==t)a();else if(/^(\d|[1-9]\d|100)(\.\d{1,2})?$/.test(t))if(t>100)a(new Error("请输入[0,100]之间的数字,最多保留两位小数"));else{t.split(".").length-1>1?a(new Error("请输入正确格式的数据")):a()}else a(new Error("请输入[0,100]之间的数字,最多保留两位小数"))}function X(e,t,a){if(""===t||void 0===t||null==t)a();else if(/^(\d|[1-9]\d|100)(\.\d{1,2})?$/.test(t)||/^\-(100|[1-9]\d|[1-9])(\.\d{1,2})?$/.test(t))if(t>100||t<-100)a(new Error("请输入[-100,100]之间的数字,最多保留两位小数"));else{t.split(".").length-1>1?a(new Error("请输入正确格式的数据")):a()}else a(new Error("请输入[-100,100]之间的数字,最多保留两位小数"))}var Z={name:"OperatingConditions",components:{InputComponent:O,FileUploadMore:I,ControlButton:b},data:function(){var e=this;return{businessObj:[],legalPersonObj:[],flag:0,surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{companyName:"公司名称",companyType:"公司类型",companyCode:"营业执照注册号",businessLicensePlace:"注册地址",legalName:"法定代表人（负责人）姓名",legalCertificateCode:"法定代表人（负责人）身份证号",contactName:"联系人",contactTel:"联系电话",worksiteAddress:"办公地址",registeredCapital:"注册资本(万元)",moneyCapital:"实缴货币资本(万元)",legalWorkYear:"法定代表人（负责人）人工作年限",legalEducation:"法定代表人（负责人）学历",legalGraduationTime:"法定代表人（负责人）最高学历毕业时间",legalCollege:"法定代表人（负责人）最高学历毕业院校",legalMajor:"法定代表人（负责人）最高学历毕业专业",legalBadCreditNumber:"法定代表人（负责人）不良信用记录次数",managerNumber:"学历在本科及以上的高级管理人员数量",stockholderName:"控股股东名称",stockholderRatio:"控股股东持股比例(%)"},isRiequiredData:["companyName","companyType","companyCode","businessLicensePlace","legalName","legalCertificateCode","contactName","contactTel"],isNumberData:["contactTel","registeredCapital","moneyCapital","legalWorkYear","legalBadCreditNumber","managerNumber","stockholderRatio"],unfillData:[],unfillForm:{},fillData:[],fillForm:{},formRules:{stockholderName:[{required:!1,message:"股东名称长度不能超过128位",trigger:"blur"},{validator:function(t,a,i){if(a){if(a.length>128)return e.flag=1,i(new Error("股东名称长度不能超过128位"));e.flag=2,i()}else e.flag=2,i()},trigger:"blur"}],worksiteAddress:[{required:!1,message:"办公地址不能超过128位",trigger:"blur"},{validator:function(t,a,i){if(a){if(a.length>128)return e.flag=1,i(new Error("不能超过128位"));e.flag=2,i()}else e.flag=2,i()},trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],companyType:[{required:!0,message:"请选择公司类型",trigger:"change"}],companyCode:[{required:!0,message:"请输入营业执照注册号",trigger:"blur"}],businessLicensePlace:[{required:!0,message:"请输入注册地址",trigger:"blur"}],legalName:[{required:!0,message:"请输入法定代表人（负责人）姓名",trigger:"blur"}],legalCertificateCode:[{required:!0,validator:function(e,t,a){!function(e,t,a,i){""===e?i(new Error(t)):/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(e)||""===e?i():i(new Error(a))}(t,"请输入法定代表人（负责人）身份证号","请输入正确的法定代表人（负责人）身份证号",a)},trigger:"blur"}],contactName:[{required:!0,validator:function(t,a,i){return a?a.length>64?(e.flag=1,i(new Error("不能超过64位"))):(e.flag=2,void i()):(e.flag=1,i(new Error("请输入联系人姓名")))},trigger:"blur"}],contactTel:[{required:!0,validator:function(e,t,a){!function(e,t,a,i){""===e?i(new Error(t)):/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/.test(e)||""===e?i():i(new Error(a))}(t,"请输入联系手机号码","请输入正确的联系手机号码",a)},trigger:"blur"}],registeredCapital:[{validator:function(e,t,a){W(t,16,"请输入正确格式的注册资本",a)},trigger:"blur"}],moneyCapital:[{validator:function(e,t,a){W(t,16,"请输入正确格式的实缴货币资本",a)},trigger:"blur"}],legalWorkYear:[{validator:Q,trigger:"blur"}],legalBadCreditNumber:[{validator:Q,trigger:"blur"}],managerNumber:[{validator:Q,trigger:"blur"}],stockholderRatio:[{validator:K,trigger:"blur"}]},hasLegalImage:!1,hasBusinessLicenseImage:!1,isInput:!1,initFillForm:"",nextPath:"ManagementTeam"}},computed:{legalPerson:function(){var e=[];if(this.legalPersonObj.length>0)e=this.legalPersonObj;else for(var t in this.surveyRatingData.legalPersonObj)e.push({name:this.surveyRatingData.legalPersonObj[t]?this.surveyRatingData.legalPersonObj[t].name:"",url:this.surveyRatingData.legalPersonObj[t]?this.surveyRatingData.legalPersonObj[t].url:""});return{name:"legalImage",fileLimit:2,title:"法定代表人（负责人）证件影印件",isRiequired:!0,fileList:e,tipText:"身份证用户需上传正反面影印件,图片建议尺寸:128X128像素,大小不超过2M,支持JPG、PNG格式"}},businessLicense:function(){var e=[];if(this.businessObj.length>0)e=this.businessObj;else for(var t in this.surveyRatingData.businessObj)e.push({name:this.surveyRatingData.businessObj[t]?this.surveyRatingData.businessObj[t].name:"",url:this.surveyRatingData.businessObj[t]?this.surveyRatingData.businessObj[t].url:""});return{name:"businessLicenseImage",title:"营业执照扫描件",fileLimit:1,isRiequired:!0,fileList:e,tipText:"营业执照1张,图片建议尺寸:128X128像素,大小不超过2M,支持JPG、PNG格式"}},operatingConditionStatus:function(){var e=0;if(2!==this.flag){if(1===this.flag)return!1;if(this.fillData===[])return!1;this.fillData.forEach(function(t,a){"contactName"===t.key&&t.value.length>64&&(e=1),"worksiteAddress"===t.key&&t.value.length>128&&(e=1),"moneyCapital"===t.key&&t.value.length>16&&(e=1),"registeredCapital"===t.key&&t.value.length>16&&(e=1),"stockholderName"===t.key&&t.value.length>128&&(e=1),"contactTel"===t.key&&t.value.length>11&&(e=1)}),this.unfillData.forEach(function(t,a){"contactName"===t.key&&t.value.length>64&&(e=1),"worksiteAddress"===t.key&&t.value.length>128&&(e=1),"moneyCapital"===t.key&&t.value.length>16&&(e=1),"registeredCapital"===t.key&&t.value.length>16&&(e=1),"stockholderName"===t.key&&t.value.length>128&&(e=1),"contactTel"===t.key&&t.value.length>11&&(e=1)})}if(e)return!1;var t=Boolean(this.legalPerson.fileList.length)&&Boolean(this.businessLicense.fileList.length);for(var a in this.isRiequiredData)this.surveyRatingData[this.isRiequiredData[a]]||(t=!1);return t}},watch:{unfillForm:{handler:function(e,t){var a=this;this.fillData.forEach(function(e,t){"contactName"===e.key&&e.value.length>64&&(a.flag=1),"worksiteAddress"===e.key&&e.value.length>128&&(a.flag=1),"moneyCapital"===e.key&&e.value.length>16&&(a.flag=1),"registeredCapital"===e.key&&e.value.length>16&&(a.flag=1),"stockholderName"===e.key&&e.value.length>128&&(a.flag=1),"contactTel"===e.key&&e.value.length>11&&(a.flag=1)}),this.unfillData.forEach(function(e,t){"contactName"===e.key&&e.value.length>64&&(a.flag=1),"worksiteAddress"===e.key&&e.value.length>128&&(a.flag=1),"moneyCapital"===e.key&&e.value.length>16&&(a.flag=1),"registeredCapital"===e.key&&e.value.length>16&&(a.flag=1),"stockholderName"===e.key&&e.value.length>128&&(a.flag=1),"contactTel"===e.key&&e.value.length>11&&(a.flag=1)}),this.Update(e)},immediate:!1,deep:!0},fillForm:{handler:function(e,t){this.Update(e)},immediate:!1,deep:!0}},mounted:function(){"1"===localStorage.getItem("contactNameLenth")&&this.validate()},created:function(){for(var e in this.hasLegalImage=this.surveyRatingData.legalImage,this.hasBusinessLicenseImage=this.surveyRatingData.businessLicenseImage,this.keyStr){var t={title:this.keyStr[e],value:this.surveyRatingData[e],key:e,isRiequired:!1,valueType:"text"};switch(-1!==this.isRiequiredData.indexOf(e)&&(t.isRiequired=!0),-1!==this.isNumberData.indexOf(e)&&(t.valueType="number"),e){case"companyType":t.valText=["","国有企业","民营企业","个体企业","外资企业","港澳台企业、中外合资企业","其他"],"0"===t.value&&(t.value=""),t.options=[{text:"国有企业",value:"1"},{text:"民营企业",value:"2"},{text:"个体企业",value:"3"},{text:"外资企业",value:"4"},{text:"港澳台企业、中外合资企业",value:"5"},{text:"其他",value:"6"}],t.valueType="select";break;case"legalEducation":t.valText=["","硕士及以上","本科","大专","大专以下"],"0"===t.value&&(t.value=""),t.options=[{text:"硕士及以上",value:"1"},{text:"本科",value:"2"},{text:"大专",value:"3"},{text:"大专以下",value:"4"}],t.valueType="select";break;case"legalGraduationTime":"1970-01-01 00:00:01"===t.value?t.value="":t.value=t.value.slice(0,10),t.valueType="date";break;case"registeredCapital":case"moneyCapital":"0"===t.value&&(t.value=""),t.placeholder="长度不能超过16位，最多保留两位小数";break;case"legalWorkYear":case"stockholderRatio":"0"===t.value&&(t.value="")}t.value?"contactName"===t.key&&t.value.length>64||"worksiteAddress"===t.key&&t.value.length>128||"stockholderName"===t.key&&t.value.length>128||"registeredCapital"===t.key&&t.value.length>16||"contactTel"===t.key&&t.value.length>11||"moneyCapital"===t.key&&t.value.length>16?this.unfillData.push(t):this.fillData.push(t):this.unfillData.push(t)}var a={},i={};for(var s in this.unfillData)a[this.unfillData[s].key]=this.unfillData[s].value;for(var n in this.fillData)i[this.fillData[n].key]=this.fillData[n].value;this.unfillForm=a,this.fillForm=i},methods:{validate:function(){this.$refs.unfillForm.validate(function(e){if(e)return!1})},valueText:function(e,t){return Array.isArray(t)?t[0]+" - "+t[1]:"select"===e.valueType?e.valText[t]:"radio"===e.valueType?"1"===t?"是":"否":t},InputEnable:function(){if(this.isInput){this.fillForm=JSON.parse(this.initFillForm);var e=this;setTimeout(function(){e.$refs.fillForm.validate(function(e){if(!e)return!1})},50)}else this.initFillForm=d()(this.fillForm);this.isInput=!this.isInput},legalSuccess:function(e,t,a){this.surveyRatingData.legalImage+=e.fname+";",this.surveyRatingData.legalImageUrl=e.furl,this.legalPersonObj=this.legalPerson.fileList.length>0?this.legalPerson.fileList:[],this.legalPersonObj.push({name:e.fname,url:e.furl}),this.surveyRatingData.legalPersonObj=this.legalPersonObj,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},businessSuccess:function(e,t,a){this.surveyRatingData.businessLicenseImage+=e.fname+";",this.surveyRatingData.businessLicenseImageUrl=e.furl,this.businessObj=this.businessLicense.fileList.length>0?this.businessLicense.fileList:[],this.businessObj.push({name:e.fname,url:e.furl}),this.surveyRatingData.businessObj=this.businessObj,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},fileRemove:function(e,t,a){switch(parseInt(a)){case 1:for(var i in this.surveyRatingData.legalPersonObj)e.response?this.surveyRatingData.legalPersonObj[i].name===e.response.fname&&this.surveyRatingData.legalPersonObj.splice(i,1):this.surveyRatingData.legalPersonObj[i].name===e.name&&this.surveyRatingData.legalPersonObj.splice(i,1);var s="";for(var n in this.surveyRatingData.legalPersonObj)s+=this.surveyRatingData.legalPersonObj[n].name+";";this.surveyRatingData.legalImage=s;break;case 2:for(var r in this.surveyRatingData.businessObj)e.response?this.surveyRatingData.businessObj[r].name===e.response.fname&&this.surveyRatingData.businessObj.splice(r,1):this.surveyRatingData.businessObj[r].name===e.name&&this.surveyRatingData.businessObj.splice(r,1);var l="";for(var o in this.surveyRatingData.businessObj)l+=this.surveyRatingData.businessObj[o].name+";";this.surveyRatingData.businessLicenseImage=l}localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},Save:function(){this.isInput=!1;var e=!0;if(this.surveyRatingData.contactName&&this.surveyRatingData.contactName.length>64&&(e=!1,localStorage.setItem("contactNameLenth",1)),this.surveyRatingData.worksiteAddress&&this.surveyRatingData.worksiteAddress.length>128&&(e=!1,localStorage.setItem("contactNameLenth",1)),this.surveyRatingData.stockholderName&&this.surveyRatingData.stockholderName.length>128&&(e=!1,localStorage.setItem("contactNameLenth",1)),this.surveyRatingData.moneyCapital&&this.surveyRatingData.moneyCapital.length>16&&(e=!1,localStorage.setItem("contactNameLenth",1)),this.surveyRatingData.registeredCapital&&this.surveyRatingData.registeredCapital.length>16&&(e=!1,localStorage.setItem("contactNameLenth",1)),this.surveyRatingData.contactTel){var t=this.surveyRatingData.contactTel;/^((0\d{2,3}-\d{7,8})|(1[34578]\d{9}))$/.test(t)||(this.surveyRatingData.contactTel="",e=!1,this.surveyRatingData.contactTel="",localStorage.setItem("contactNameLenth",1))}return this.surveyRatingData.stockholderRatio&&(this.surveyRatingData.stockholderRatio>100||this.surveyRatingData.stockholderRatio<0)&&(e=!1,this.surveyRatingData.stockholderRatio="",localStorage.setItem("contactNameLenth",1)),e&&localStorage.setItem("contactNameLenth",2),localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0},Update:function(e){for(var t in e)"legalGraduationTime"===t?this.surveyRatingData.legalGraduationTime=e[t]?e[t]+" 00:00:01":"":this.surveyRatingData[t]=e[t]}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operating-conditions"},[a("h2",{staticClass:"sub-heading"},[e._v("经营状况")]),e._v(" "),a("div",{staticClass:"operating-conditions-main"},[a("h3",{staticClass:"sub-heading"},[e._v("待填项")]),e._v(" "),a("div",{staticClass:"unfilled"},[a("el-form",{ref:"unfillForm",staticClass:"unfill-form",attrs:{model:e.unfillForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.unfillData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["select"==t.valueType?a("el-select",{model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}}):"daterange"===t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}}):"number"===t.valueType?a("el-input",{attrs:{type:"number",placeholder:t.placeholder,oninput:"value=value.replace(/^\\D*(\\d*(?:\\.\\d{0,2})?).*$/g, '$1')"},model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}}):a("el-input",{model:{value:e.unfillForm[t.key],callback:function(a){e.$set(e.unfillForm,t.key,a)},expression:"unfillForm[item.key]"}})],1)}),1),e._v(" "),a("div",{staticClass:"picture-preview"},[e.hasLegalImage?e._e():a("FileUploadMore",{attrs:{"tip-text":e.legalPerson.tipText,title:e.legalPerson.title,"is-riequired":e.legalPerson.isRiequired,name:e.legalPerson.name,"file-limit":e.legalPerson.fileLimit,isPreview:!1,"list-type":"picture-card","file-list-prop":e.legalPerson.fileList,"handle-avatar-success":e.legalSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,1)}}}),e._v(" "),e.hasBusinessLicenseImage?e._e():a("FileUploadMore",{attrs:{"tip-text":e.businessLicense.tipText,title:e.businessLicense.title,"is-riequired":e.businessLicense.isRiequired,"file-limit":e.businessLicense.fileLimit,name:e.businessLicense.name,isPreview:!1,"list-type":"picture-card","file-list-prop":e.businessLicense.fileList,"handle-avatar-success":e.businessSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,2)}}})],1)],1),e._v(" "),a("h3",{staticClass:"sub-heading"},[e._v("已填项")]),e._v(" "),a("div",{staticClass:"input-enable",on:{click:e.InputEnable}},[e._v(e._s(e.isInput?"取消修改":"修改"))]),e._v(" "),a("div",{staticClass:"filled"},[a("el-form",{ref:"fillForm",staticClass:"fill-form",attrs:{model:e.fillForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.fillData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},[e.isInput?"select"==t.valueType?a("el-select",{model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t+e.text,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):"daterange"==t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):"number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):a("el-input",{model:{value:e.fillForm[t.key],callback:function(a){e.$set(e.fillForm,t.key,a)},expression:"fillForm[item.key]"}}):a("p",[e._v(e._s(e.valueText(t,e.fillForm[t.key])))])],1)}),1),e._v(" "),a("div",{staticClass:"picture-preview"},[e.hasLegalImage?a("FileUploadMore",{attrs:{"tip-text":e.legalPerson.tipText,title:e.legalPerson.title,"is-riequired":e.legalPerson.isRiequired,"file-limit":e.legalPerson.fileLimit,name:e.legalPerson.name,isPreview:!1,"preview-url":e.surveyRatingData.legalImageUrl,"list-type":"picture-card","file-list-prop":e.legalPerson.fileList,"handle-avatar-success":e.legalSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,1)}}}):e._e(),e._v(" "),e.hasBusinessLicenseImage?a("FileUploadMore",{attrs:{"tip-text":e.businessLicense.tipText,title:e.businessLicense.title,"file-limit":e.businessLicense.fileLimit,"is-riequired":e.businessLicense.isRiequired,name:e.businessLicense.name,isPreview:!1,"preview-url":e.surveyRatingData.businessLicenseImageUrl,"list-type":"picture-card","file-list-prop":e.businessLicense.fileList,"handle-avatar-success":e.businessSuccess},on:{fileRemove:function(t,a){return e.fileRemove(t,a,2)}}}):e._e()],1)],1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.operatingConditionStatus,save:e.Save}})],1)])},staticRenderFns:[]};var te=a("VU/8")(Z,ee,!1,function(e){a("fI+M"),a("VW7R")},"data-v-0f728d3e",null).exports,ae={name:"ManagementTeam",components:{InputComponent:O,FileUpload:M,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{teamId:"管理团队ID",dutyId:"尽职调查ID",post:"高级管理人员职务",name:"姓名",department:"部门",responsibility:"主要职责"},teamData:[{id:"",dutyId:"",post:"",name:"",department:"",responsibility:""}],unfilledData:[{inputData:[{title:"姓名",value:""},{title:"部门",value:""},{title:"主要职责",value:""}],fileList:[]}],tipText:"请上传该高级管理人员职务文件,建议使用word、excel、pdf等,文件不大于2MB",nextPath:"FinancialStatus"}},computed:{managementTeamStatus:function(){return!0}},created:function(){if(this.surveyRatingData.checkAgentDutyTeam){this.teamData=JSON.parse(this.surveyRatingData.checkAgentDutyTeam);var e=[];for(var t in this.teamData){var a={inputData:[{title:"姓名",value:this.teamData[t].name},{title:"部门",value:this.teamData[t].department},{title:"主要职责",value:this.teamData[t].responsibility}],fileList:this.teamData[t].post?[{name:this.teamData[t].post?this.teamData[t].post:"",url:this.teamData[t].postUrl?this.teamData[t].postUrl:""}]:[]};e.push(a)}this.unfilledData=e}else this.teamData[0].dutyId=this.surveyRatingData.recordId},methods:{addMemmber:function(){this.unfilledData.push({inputData:[{title:"姓名",value:""},{title:"部门",value:""},{title:"主要职责",value:""}],fileList:[]});var e={id:"",dutyId:this.surveyRatingData.recordId,post:"",name:"",department:"",responsibility:""};this.teamData.push(e)},removeMemmber:function(e){this.unfilledData.splice(e,1),this.teamData.splice(e,1)},uploadSuccess:function(e,t,a,i){"0"===t.return_code&&(this.teamData[e].post=t.fname,this.teamData[e].postUrl=t.furl)},fileRemove:function(e,t,a,i){this.teamData[e].post="",this.teamData[e].postUrl=""},Save:function(){var e=this.unfilledData;for(var t in e)(e[t].inputData[0].value||e[t].inputData[1].value||e[t].inputData[2].value||this.teamData[t].post)&&(this.teamData[t].name=e[t].inputData[0].value,this.teamData[t].department=e[t].inputData[1].value,this.teamData[t].responsibility=e[t].inputData[2].value);return this.surveyRatingData.checkAgentDutyTeam=d()(this.teamData),localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("manageStsa"+e,"1")}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"management-team"},[a("h2",{staticClass:"sub-heading"},[e._v("管理团队")]),e._v(" "),a("div",{staticClass:"management-team-main"},[e._l(e.unfilledData,function(t,i){return a("div",{key:i,staticClass:"unfilled-item"},[a("div",{staticClass:"operat"},[e.unfilledData.length<5?a("i",{staticClass:"el-icon-circle-plus-outline",on:{click:e.addMemmber}}):e._e(),e._v(" "),e.unfilledData.length>1?a("i",{staticClass:"el-icon-remove-outline",staticStyle:{"margin-left":"30px"},on:{click:function(t){return e.removeMemmber(i)}}}):e._e()]),e._v(" "),a("InputComponent",{attrs:{"form-data":t.inputData}}),e._v(" "),a("FileUpload",{attrs:{title:"高级管理人员职务","file-limit":1,"tip-text":e.tipText,"file-list-prop":t.fileList,name:i,"handle-avatar-success":function(t,a,s){return e.uploadSuccess(i,t,a,s)}},on:{fileRemove:function(t,a,s){return e.fileRemove(i,t,a,s)}}})],1)}),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.managementTeamStatus,save:e.Save}})],2)])},staticRenderFns:[]};var se=a("VU/8")(ae,ie,!1,function(e){a("5t1e")},"data-v-3aa99384",null).exports,ne={name:"FinancialStatus",components:{InputComponent:O,FileUploadMore:I,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),financialStatementObj:[],evidenceObj:[],keyStr:{lastYearDebtRatio:"上年长期资本负债率(%)",lastYearCapitalRatio:"上年应收账款周转率(%)",lastYearAccountRatio:"上年净资产增长率(%)",lastYearGainRatio:"上年经营净利率(%)",lastYearIncoming:"上年总收入(万元)",lastYearProfit:"上年净利润(万元)",capitalDebtRatio:"资产负债率(%)",totalCapital:"资产总额(万元)",totalTax:"交税总额(万元)"},radioData:[{title:"注册资本是否为实缴货币",value:null,isRiequired:!0,valueType:"radio"},{title:"财务报表是否经审计",value:null,isRiequired:!0,valueType:"radio"}],financialStatement:{title:"上传财务报表",isRiequired:!0,fileList:[],tipText:"文件大小2M,资产负债表、利润表、现金流量表，最多3个文件"},evidence:{title:"上一年度审计证明材料",fileList:[],tipText:"上一年度审计证明材料，最多3个文件"},evidenceData:[{title:"上年现金流量比率(%)",key:"lastYearCashRatio",value:"",isRiequired:!1,valueType:"number"}],evidenceForm:{},financialDetails:[],financialForm:[],formRules:{lastYearCashRatio:[{validator:X,trigger:"blur"}],lastYearDebtRatio:[{validator:K,trigger:"blur"}],lastYearCapitalRatio:[{validator:X,trigger:"blur"}],lastYearAccountRatio:[{validator:X,trigger:"blur"}],lastYearGainRatio:[{validator:X,trigger:"blur"}],lastYearIncoming:[{validator:z,trigger:"blur"}],lastYearProfit:[{validator:z,trigger:"blur"}],capitalDebtRatio:[{validator:K,trigger:"blur"}],totalCapital:[{validator:z,trigger:"blur"}],totalTax:[{validator:G,trigger:"blur"}]},nextPath:"InternalControl"}},computed:{FinancialStatus:function(){return Boolean(this.surveyRatingData.financialStatement)},financialList:function(){var e=[];if(this.financialStatementObj.length>0)e=this.financialStatementObj;else for(var t in this.surveyRatingData.financialStatementObj)e.push({name:this.surveyRatingData.financialStatementObj[t]?this.surveyRatingData.financialStatementObj[t].name:"",url:this.surveyRatingData.financialStatementObj[t]?this.surveyRatingData.financialStatementObj[t].url:""});return e},evidenceList:function(){var e=[];if(this.evidenceObj.length>0)e=this.evidenceObj;else for(var t in this.surveyRatingData.evidenceObj)e.push({name:this.surveyRatingData.evidenceObj[t]?this.surveyRatingData.evidenceObj[t].name:"",url:this.surveyRatingData.evidenceObj[t]?this.surveyRatingData.evidenceObj[t].url:""});return e}},watch:{radioData:{handler:function(e,t){console.log(e,t),this.surveyRatingData.isRegisteredCapitalCoin=e[0].value,this.surveyRatingData.isStatementAudit=e[1].value},immediate:!1,deep:!0},evidenceForm:{handler:function(e,t){this.Update(e)},immediate:!1,deep:!0},financialForm:{handler:function(e,t){this.Update(e)},immediate:!1,deep:!0}},created:function(){for(var e in this.radioData[0].value=this.surveyRatingData.isRegisteredCapitalCoin,this.radioData[1].value=this.surveyRatingData.isStatementAudit,this.evidenceData[0].value=this.surveyRatingData.lastYearCashRatio,this.evidence.fileList=this.surveyRatingData.lastYearAudit?[{name:this.surveyRatingData.lastYearAudit,url:this.surveyRatingData.lastYearAuditUrl}]:[],this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!1,valueType:""};this.financialDetails.push(t)}var a={},i={};for(var s in this.evidenceData)a[this.evidenceData[s].key]=this.evidenceData[s].value;for(var n in this.financialDetails)i[this.financialDetails[n].key]=this.financialDetails[n].value;this.evidenceForm=a,this.financialForm=i},methods:{valueText:function(e,t){return Array.isArray(t)?t[0]+" - "+t[1]:"select"===e.valueType?e.valText[t]:"radio"===e.valueType?"1"===t?"是":"否":t},financialSuccess:function(e){this.surveyRatingData.financialStatement+=e.fname+";",this.surveyRatingData.financialStatementUrl=e.furl,this.financialStatementObj=this.financialList.length>0?this.financialList:[],this.financialStatementObj.push({name:e.fname,url:e.furl}),this.surveyRatingData.financialStatementObj=this.financialStatementObj,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},financialRemove:function(e,t){for(var a in this.surveyRatingData.financialStatementObj)e.response?this.surveyRatingData.financialStatementObj[a].name===e.response.fname&&this.surveyRatingData.financialStatementObj.splice(a,1):this.surveyRatingData.financialStatementObj[a].name===e.name&&this.surveyRatingData.financialStatementObj.splice(a,1);var i="";for(var s in this.surveyRatingData.financialStatementObj)i+=this.surveyRatingData.financialStatementObj[s].name+";";this.surveyRatingData.financialStatement=i,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},evidenceSuccess:function(e){this.surveyRatingData.lastYearAudit+=e.fname+";",this.surveyRatingData.lastYearAuditUrl=e.furl,this.evidenceObj=this.evidenceList.length>0?this.evidenceList:[],this.evidenceObj.push({name:e.fname,url:e.furl}),this.surveyRatingData.evidenceObj=this.evidenceObj,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},evidenceRemove:function(e,t){for(var a in this.surveyRatingData.evidenceObj)e.response?this.surveyRatingData.evidenceObj[a].name===e.response.fname&&this.surveyRatingData.evidenceObj.splice(a,1):this.surveyRatingData.evidenceObj[a].name===e.name&&this.surveyRatingData.evidenceObj.splice(a,1);var i="";for(var s in this.surveyRatingData.evidenceObj)i+=this.surveyRatingData.evidenceObj[s].name+";";this.surveyRatingData.lastYearAudit=i,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData))},Save:function(){var e=!0,t=!0;return this.$refs.evidenceForm.validate(function(t){if(!t)return e=!1,!1}),this.$refs.financialForm.validate(function(e){if(!e)return t=!1,!1}),!(!e||!t)&&(localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0)},Update:function(e){for(var t in e)this.surveyRatingData[t]=e[t]}}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"financial-status"},[a("h2",{staticClass:"sub-heading"},[e._v("财务状况")]),e._v(" "),a("div",{staticClass:"financial-status-main"},[a("InputComponent",{attrs:{"form-data":e.radioData}}),e._v(" "),a("div",{staticClass:"financial-statements"},[a("FileUploadMore",{attrs:{title:e.financialStatement.title,"is-riequired":e.financialStatement.isRiequired,"file-limit":3,"tip-text":e.financialStatement.tipText,"file-list-prop":e.financialList,"handle-avatar-success":e.financialSuccess},on:{fileRemove:function(t,a){return e.financialRemove(t,a)}}})],1),e._v(" "),a("div",{staticClass:"evidence"},[a("FileUploadMore",{attrs:{title:e.evidence.title,"tip-text":e.evidence.tipText,"file-limit":3,"file-list-prop":e.evidenceList,"handle-avatar-success":e.evidenceSuccess},on:{fileRemove:function(t,a){return e.evidenceRemove(t,a)}}}),e._v(" "),a("el-form",{ref:"evidenceForm",staticClass:"evidence-form",attrs:{model:e.evidenceForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.evidenceData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["number"==t.valueType?a("el-input",{attrs:{type:"string"},model:{value:e.evidenceForm[t.key],callback:function(a){e.$set(e.evidenceForm,t.key,a)},expression:"evidenceForm[item.key]"}}):a("el-input",{model:{value:e.evidenceForm[t.key],callback:function(a){e.$set(e.evidenceForm,t.key,a)},expression:"evidenceForm[item.key]"}})],1)}),1)],1),e._v(" "),a("div",{staticClass:"financialDetails"},[a("el-form",{ref:"financialForm",staticClass:"financial-form",attrs:{model:e.financialForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.financialDetails,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["select"==t.valueType?a("el-select",{model:{value:e.financialForm[t.key],callback:function(a){e.$set(e.financialForm,t.key,a)},expression:"financialForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t+e.text,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.financialForm[t.key],callback:function(a){e.$set(e.financialForm,t.key,a)},expression:"financialForm[item.key]"}}):"daterange"==t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.financialForm[t.key],callback:function(a){e.$set(e.financialForm,t.key,a)},expression:"financialForm[item.key]"}}):"number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.financialForm[t.key],callback:function(a){e.$set(e.financialForm,t.key,a)},expression:"financialForm[item.key]"}}):a("el-input",{model:{value:e.financialForm[t.key],callback:function(a){e.$set(e.financialForm,t.key,a)},expression:"financialForm[item.key]"}})],1)}),1)],1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.FinancialStatus,save:e.Save}})],1)])},staticRenderFns:[]};var le=a("VU/8")(ne,re,!1,function(e){a("EPrh"),a("Ne81")},"data-v-3dde7862",null).exports,oe={name:"InternalControl",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{isOrganizationSound:"是否有健全的组织架构",isInternalControlSound:"是否有健全的内控制度",isAntiMoneyLaundering:"是否有健全的反洗钱制度",isRiskManagementSound:"是否有健全的业务和风险管理制度",isSecuritySound:"是否有健全的信息安全和保密管理机制",isEmergencySound:"是否有业务运行紧急预案",isSupportSound:"是否有完善的服务体系和服务支持能力"},radioData:[],nextPath:"CreditStatus"}},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("internalStsa"+e,"1")},computed:{internalControlStatus:function(){var e=!0;for(var t in this.keyStr)this.surveyRatingData[t]||(e=!1);return e}},created:function(){for(var e in this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"radio"};this.radioData.push(t)}},methods:{Save:function(){var e=this.radioData;for(var t in e)this.surveyRatingData[e[t].key]=e[t].value;return localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}}},ue={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"internal-control"},[t("h2",{staticClass:"sub-heading"},[this._v("内控水平")]),this._v(" "),t("div",{staticClass:"internal-control-main"},[t("InputComponent",{attrs:{"form-data":this.radioData}}),this._v(" "),t("ControlButton",{attrs:{"next-path":this.nextPath,"is-disabled":!this.internalControlStatus,save:this.Save}})],1)])},staticRenderFns:[]};var ce=a("VU/8")(oe,ue,!1,function(e){a("kdVE"),a("se9x")},"data-v-fea37cc6",null).exports,me={name:"CreditStatus",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{litigationNumber:"上年涉诉案件数量",litigationMoney:"上年涉诉案件金额(万元)",undoneLitigationNumber:"上年未执行案件数量",undoneLitigationMoney:"上年未执行案件金额(万元)"},radioData:[{title:"上年是否涉诉重大诉讼案件",value:null,isRiequired:!0,valueType:"radio"}],caseDetails:[],caseForm:{},formRules:{litigationNumber:[{required:!0,message:"请输入上年涉诉案件数量",trigger:"blur"},{validator:Q,trigger:"blur"}],litigationMoney:[{required:!0,message:"请输入上年涉诉案件金额(万元)",trigger:"blur"},{validator:G,trigger:"blur"}],undoneLitigationNumber:[{required:!0,message:"请输入上年未执行案件数量",trigger:"blur"},{validator:Q,trigger:"blur"}],undoneLitigationMoney:[{required:!0,message:"请输入上年未执行案件金额(万元)",trigger:"blur"},{validator:G,trigger:"blur"}]},nextPath:"ProfessionalCompetence"}},computed:{creditStatusStatus:function(){var e=!0;if("1"===this.radioData[0].value)for(var t in this.keyStr)this.surveyRatingData[t]||(e=!1);return e}},created:function(){for(var e in this.radioData[0].value=this.surveyRatingData.isMajorLitigation,this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"number"};this.caseDetails.push(t),console.log(this.caseDetails)}var a={};for(var i in this.caseDetails)a[this.caseDetails[i].key]=this.caseDetails[i].value;this.caseForm=a},watch:{caseForm:{handler:function(e,t){for(var a in e)this.surveyRatingData[a]=e[a]},immediate:!1,deep:!0}},methods:{Save:function(){this.surveyRatingData.isMajorLitigation=this.radioData[0].value;var e=this.radioData;for(var t in e)this.surveyRatingData[e[t].key]=e[t].value;return localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("credisStsa"+e,"1")}},pe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"credit-status"},[a("h2",{staticClass:"sub-heading"},[e._v("信用状况")]),e._v(" "),a("div",{staticClass:"credit-status-main"},[a("InputComponent",{attrs:{"form-data":e.radioData}}),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"===e.radioData[0].value,expression:"radioData[0].value === '1'"}],ref:"caseForm",staticClass:"case-form",attrs:{model:e.caseForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.caseDetails,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.caseForm[t.key],callback:function(a){e.$set(e.caseForm,t.key,a)},expression:"caseForm[item.key]"}}):a("el-input",{model:{value:e.caseForm[t.key],callback:function(a){e.$set(e.caseForm,t.key,a)},expression:"caseForm[item.key]"}})],1)}),1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.creditStatusStatus,save:e.Save}})],1)])},staticRenderFns:[]};var ve=a("VU/8")(me,pe,!1,function(e){a("Coz6"),a("D7Pd")},"data-v-4efd3a75",null).exports,de={name:"ProfessionalCompetence",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{contractStartTime:"合同开始时间",cooperationScope:"业务合作范围",cooperationPlace:"合作地域",serviceStaffNumber:"从事外包服务人员数量",merchantNumber:"当前维护的商户数量",machineNumber:"当前维护的机具数量",companyWorkYear:"公司从业年限",seniorManagerNumber:"合格高级管理人数",institutionNumber:"服务的支付机构数量",institutionName:"当前服务的支付机构"},professionalData:[],professionalForm:{},otherHandle:!1,otherBusiness:"",formRules:{contractStartTime:[{required:!0,message:"请选择合同开始时间",trigger:"blur"},{required:!0,message:"请选择合同开始时间",trigger:"change"}],cooperationScope:[{required:!0,message:"请选择业务合作范围",trigger:"blur"},{required:!0,message:"请选择业务合作范围",trigger:"change"}],cooperationPlace:[{required:!0,message:"请输入合作地域",trigger:"blur"}],serviceStaffNumber:[{required:!0,message:"请输入从事外包服务人员数量",trigger:"blur"},{validator:Q,trigger:"blur"}],merchantNumber:[{required:!0,message:"请输入当前维护的商户数量",trigger:"blur"},{validator:Q,trigger:"blur"}],machineNumber:[{required:!0,message:"请输入当前维护的机具数量",trigger:"blur"},{validator:Q,trigger:"blur"}],companyWorkYear:[{required:!0,message:"请输入公司从业年限",trigger:"blur"},{validator:Q,trigger:"blur"}],seniorManagerNumber:[{required:!0,message:"请输入合格高级管理人数",trigger:"blur"},{validator:Q,trigger:"blur"}],institutionNumber:[{validator:Q,trigger:"blur"}]},nextPath:"BusinessCompliance"}},computed:{professionalCompetenceStatus:function(){var e=!0;for(var t in""==this.otherBusiness&&"11"==this.surveyRatingData.cooperationScope&&(e=!1),this.keyStr)this.surveyRatingData[t]||"institutionNumber"===t||"institutionName"===t||(e=!1);return e}},created:function(){for(var e in this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"Number"};"contractStartTime"===e?("1970-01-01 00:00:01"===t.value?t.value="":t.value=t.value.slice(0,10),t.valueType="date"):"cooperationScope"===e?(t.valText=["","聚合支付服务","特约商户推荐","受理终端布放","受理标识张贴","特约商户培训","特约商户巡检","受理终端维护","受理终端巡检","耗材配送","特约商户调单","其他业务"],"0"===t.value&&(t.value=""),t.options=[{text:"聚合支付服务",value:"1"},{text:"特约商户推荐",value:"2"},{text:"受理终端布放",value:"3"},{text:"受理标识张贴",value:"4"},{text:"特约商户培训",value:"5"},{text:"特约商户巡检",value:"6"},{text:"受理终端维护",value:"7"},{text:"受理终端巡检",value:"8"},{text:"耗材配送",value:"9"},{text:"特约商户调单",value:"10"},{text:"其他业务",value:"11"}],t.valueType="select"):"cooperationPlace"!==e&&"institutionName"!==e||(t.valueType="text"),"institutionNumber"!==e&&"institutionName"!==e||(t.isRiequired=!1),this.professionalData.push(t)}var a={};for(var i in this.professionalData)a[this.professionalData[i].key]=this.professionalData[i].value;this.professionalForm=a,this.otherBusiness=this.surveyRatingData.otherBusiness||""},watch:{professionalForm:{handler:function(e,t){for(var a in e)"cooperationScope"===a&&("11"==e[a]?this.otherHandle=!0:this.otherHandle=!1),"contractStartTime"===a?this.surveyRatingData.contractStartTime=e[a]?e[a]+" 00:00:01":"":this.surveyRatingData[a]=e[a]},immediate:!1,deep:!0}},methods:{otherTextValue:function(){this.$set(this.surveyRatingData,"otherBusiness",this.otherBusiness)},Save:function(){return localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"professional-competence"},[a("h2",{staticClass:"sub-heading"},[e._v("专业能力")]),e._v(" "),a("div",{staticClass:"professional-competence-main"},[a("el-form",{ref:"professionalForm",staticClass:"professional-form",attrs:{model:e.professionalForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.professionalData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["select"==t.valueType?a("el-select",{model:{value:e.professionalForm[t.key],callback:function(a){e.$set(e.professionalForm,t.key,a)},expression:"professionalForm[item.key]"}},e._l(t.options,function(e,t){return a("el-option",{key:t+e.text,attrs:{label:e.text,value:e.value}})}),1):"date"==t.valueType?a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.professionalForm[t.key],callback:function(a){e.$set(e.professionalForm,t.key,a)},expression:"professionalForm[item.key]"}}):"daterange"==t.valueType?a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","range-separator":"-",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd"},model:{value:e.professionalForm[t.key],callback:function(a){e.$set(e.professionalForm,t.key,a)},expression:"professionalForm[item.key]"}}):"number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.professionalForm[t.key],callback:function(a){e.$set(e.professionalForm,t.key,a)},expression:"professionalForm[item.key]"}}):a("el-input",{model:{value:e.professionalForm[t.key],callback:function(a){e.$set(e.professionalForm,t.key,a)},expression:"professionalForm[item.key]"}}),e._v(" "),"select"==t.valueType&&e.otherHandle?a("el-input",{attrs:{type:"text",placeholder:"请填写其他业务范围"},on:{blur:e.otherTextValue},model:{value:e.otherBusiness,callback:function(t){e.otherBusiness=t},expression:"otherBusiness"}}):e._e()],1)}),1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.professionalCompetenceStatus,save:e.Save}})],1)])},staticRenderFns:[]};var he=a("VU/8")(de,ge,!1,function(e){a("FhM4"),a("0/cj")},"data-v-7c37e0aa",null).exports,fe={name:"BusinessCompliance",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{isConformanceDepartment:"是否建立合规管理部门",isConformanceRegulation:"是否建立合规管理制度",isConformanceProcess:"是否建立合规管理流程"},requiredinput:[{title:"合规工作人数",key:"conformanceStaffNumber",value:"",isRiequired:!0,valueType:"number"}],requiredForm:{conformanceStaffNumber:""},requiredField:[],notRequired:[{title:"是否具有标准的合规管理文本",key:"isConformanceText",value:"",isRiequired:!1,valueType:"radio"}],formRules:{conformanceStaffNumber:[{required:!0,message:"请输入合规工作人数",trigger:"blur"},{validator:Q,trigger:"blur"}]},nextPath:"PersonalInfoProtection"}},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("business"+e,"1")},computed:{businessComplianceStatus:function(){if(!this.requiredForm.conformanceStaffNumber)return!1;var e=!0;for(var t in this.keyStr)this.surveyRatingData[t]||(e=!1);return e}},watch:{requiredForm:{handler:function(e,t){this.surveyRatingData.conformanceStaffNumber=e.conformanceStaffNumber},immediate:!1,deep:!0},requiredField:{handler:function(e,t){for(var a in e)this.surveyRatingData[e[a].key]=e[a].value},immediate:!1,deep:!0},notRequired:{handler:function(e,t){this.surveyRatingData.isConformanceText=e[0].value},immediate:!1,deep:!0}},created:function(){for(var e in this.requiredForm.conformanceStaffNumber=this.surveyRatingData.conformanceStaffNumber,this.notRequired[0].value=this.surveyRatingData.isConformanceText,this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"radio"};this.requiredField.push(t)}},methods:{Save:function(){return localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}}},ye={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"business-compliance"},[a("h2",{staticClass:"sub-heading"},[e._v("业务合规")]),e._v(" "),a("div",{staticClass:"business-compliance-main"},[a("el-form",{ref:"requiredForm",staticClass:"required-form",attrs:{model:e.requiredForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.requiredinput,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.requiredForm[t.key],callback:function(a){e.$set(e.requiredForm,t.key,a)},expression:"requiredForm[item.key]"}}):a("el-input",{model:{value:e.requiredForm[t.key],callback:function(a){e.$set(e.requiredForm,t.key,a)},expression:"requiredForm[item.key]"}})],1)}),1),e._v(" "),a("InputComponent",{attrs:{"form-data":e.requiredField}}),e._v(" "),a("InputComponent",{attrs:{"form-data":e.notRequired}}),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.businessComplianceStatus,save:e.Save}})],1)])},staticRenderFns:[]};var be=a("VU/8")(fe,ye,!1,function(e){a("oo8R"),a("gfGv")},"data-v-9f431f8e",null).exports,De={name:"PersonalInfoProtection",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),keyStr:{isSecurityAttestation:"是否取得相关安全测评认证",isInformationManagement:"是否建立完善的信息管理及保密制度",isInformationProcess:"是否建立信息管理流程",isStaffMaintainSecrecy:"员工是否签订保密协议",isHierachicalAuthorize:"系统管理是否采取分级授权",isInfomationEncryption:"信息是否进行加密存储",isSecrecyAudit:"是否每年开展信息安全审计",isSecrecyDangerCheck:"是否每半年开展信息安全隐患排查"},radioData:[],nextPath:"RiskControlAbility"}},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("personalStsa"+e,"1")},computed:{personalInfoProtectionStatus:function(){var e=!0;for(var t in this.keyStr)this.surveyRatingData[t]||(e=!1);return e}},watch:{radioData:{handler:function(e,t){for(var a in e)this.surveyRatingData[e[a].key]=e[a].value},immediate:!1,deep:!0}},created:function(){for(var e in this.keyStr){var t={title:this.keyStr[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"radio"};this.radioData.push(t)}},methods:{Save:function(){localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0})}}},Re={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"personal-info-protection"},[t("h2",{staticClass:"sub-heading"},[this._v("个人信息保护")]),this._v(" "),t("div",{staticClass:"personal-info-protection-main"},[t("InputComponent",{attrs:{"form-data":this.radioData}}),this._v(" "),t("ControlButton",{attrs:{"next-path":this.nextPath,"is-disabled":!this.personalInfoProtectionStatus,save:this.Save}})],1)])},staticRenderFns:[]};var Se=a("VU/8")(De,Re,!1,function(e){a("kttv"),a("SBC5")},"data-v-fe010ebe",null).exports,ke={name:"RiskControlAbility",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),controlKey:{isPlanElmergencyDrill:"是否制定年度应急演练计划",isLaunchElmergencyDrill:"是否按计划开展应急演练",isEmergencyHandle:"是否建立完善的突发事件处理制度",isCheckMch:"是否对商户进行巡检",isTrainMch:"是否对商户进行培训",isRiskHappened:"是否发生过风险事件"},eventKey:{riskHappenedNumber:"发生风险事件数量",swindleMoney:"涉及欺诈交易金额(万元)",swindleRatio:"收单欺诈率(%)"},riskControlData:[],riskEventRadio:[{title:"拓展商户是否发生风险事件",key:"isMchRiskHappened",value:"",isRiequired:!0,valueType:"radio"}],riskEventData:[],riskEventForm:{},formRules:{riskHappenedNumber:[{required:!0,message:"请输入发生风险事件数量",trigger:"blur"},{validator:Q,trigger:"blur"}],swindleMoney:[{required:!0,message:"请输入涉及欺诈交易金额(万元)",trigger:"blur"},{validator:G,trigger:"blur"}],swindleRatio:[{required:!0,message:"请输入收单欺诈率(%)",trigger:"blur"},{validator:K,trigger:"blur"}]},nextPath:"OtherComments"}},computed:{RiskControlAbilityStatus:function(){var e=!0;if("1"===this.riskControlData[5].value)for(var t in this.eventKey)this.surveyRatingData[t]||(e=!1);return e}},watch:{riskControlData:{handler:function(e,t){for(var a in e)this.surveyRatingData[e[a].key]=e[a].value},immediate:!1,deep:!0},riskEventRadio:{handler:function(e,t){for(var a in e)this.surveyRatingData[e[a].key]=e[a].value},immediate:!1,deep:!0},riskEventForm:{handler:function(e,t){for(var a in e)this.surveyRatingData[a]=e[a]},immediate:!1,deep:!0}},created:function(){for(var e in this.riskEventRadio[0].value=this.surveyRatingData.isMchRiskHappened,this.controlKey){var t={title:this.controlKey[e],key:e,value:this.surveyRatingData[e],isRiequired:!0,valueType:"radio"};this.riskControlData.push(t)}for(var a in this.eventKey){var i={title:this.eventKey[a],key:a,value:this.surveyRatingData[a],isRiequired:!0,valueType:"number"};this.riskEventData.push(i)}var s={};for(var n in this.riskEventData)s[this.riskEventData[n].key]=this.riskEventData[n].value;this.riskEventForm=s},mounted:function(){var e=localStorage.getItem("statusId")?localStorage.getItem("statusId"):"00";localStorage.setItem("RiskControlStsa"+e,"1")},methods:{Save:function(){var e=this;return"1"===this.riskControlData[5].value&&this.$refs.riskEventForm.validate(function(t){t||e.surveyRatingData.swindleRatio>100&&(e.surveyRatingData.swindleRatio="")}),localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),!0}}},Ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"risk-control-ability"},[a("h2",{staticClass:"sub-heading"},[e._v("风控能力")]),e._v(" "),a("div",{staticClass:"risk-control-ability-main"},[a("InputComponent",{attrs:{"form-data":e.riskControlData}}),e._v(" "),a("InputComponent",{directives:[{name:"show",rawName:"v-show",value:"1"===e.riskControlData[5].value,expression:"riskControlData[5].value === '1'"}],attrs:{"form-data":e.riskEventRadio}}),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:"1"===e.riskControlData[5].value,expression:"riskControlData[5].value === '1'"}],ref:"riskEventForm",staticClass:"risk-form",attrs:{model:e.riskEventForm,rules:e.formRules,"label-width":"100px","label-position":"left"}},e._l(e.riskEventData,function(t,i){return a("el-form-item",{key:i,attrs:{label:t.title,prop:t.key}},["number"==t.valueType?a("el-input",{attrs:{type:"number"},model:{value:e.riskEventForm[t.key],callback:function(a){e.$set(e.riskEventForm,t.key,a)},expression:"riskEventForm[item.key]"}}):a("el-input",{model:{value:e.riskEventForm[t.key],callback:function(a){e.$set(e.riskEventForm,t.key,a)},expression:"riskEventForm[item.key]"}})],1)}),1),e._v(" "),a("ControlButton",{attrs:{"next-path":e.nextPath,"is-disabled":!e.RiskControlAbilityStatus,save:e.Save}})],1)])},staticRenderFns:[]};var Ie=a("VU/8")(ke,Ce,!1,function(e){a("ySgR"),a("PWhF")},"data-v-3826e688",null).exports,Le={name:"OtherComments",components:{InputComponent:O,ControlButton:b},data:function(){return{surveyRatingData:JSON.parse(localStorage.getItem("surveyRatingData")),commentsData:[{title:"服务商意见",value:"",isRiequired:!1,valueType:"textarea"}],nextPath:"SurveyRating",previewPath:"SurveyRatingPreview"}},created:function(){this.commentsData[0].value=this.surveyRatingData.agentSuggestion},watch:{commentsData:{handler:function(e,t){this.surveyRatingData.agentSuggestion=this.commentsData[0].value},immediate:!1,deep:!0}},methods:{SaveToback:function(){this.commentsData[0].value=this.surveyRatingData.agentSuggestion,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$message.closeAll(),this.$message({message:"草稿保存成功",type:"success",center:!0}),this.$router.push(this.nextPath)},SaveSubmit:function(){this.surveyRatingData.agentSuggestion=this.commentsData[0].value,localStorage.setItem("surveyRatingData",d()(this.surveyRatingData)),this.$router.push(this.previewPath)}}},_e={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"other-comments"},[t("h2",{staticClass:"sub-heading"},[this._v("其他")]),this._v(" "),t("div",{staticClass:"other-comments-main"},[t("InputComponent",{attrs:{"form-data":this.commentsData}}),this._v(" "),t("ControlButton",{attrs:{type:"SaveToback","next-path":this.nextPath,"is-disabled":!1,"save-toback":this.SaveToback,"save-submit":this.SaveSubmit}})],1)])},staticRenderFns:[]};var Te=a("VU/8")(Le,_e,!1,function(e){a("C7oe"),a("ySVD")},"data-v-0e743dbd",null).exports,xe={name:"SurveyRatingPreview",components:{InputComponent:O,FileUploadMore:I,ControlButton:b},data:function(){return{imgInfo:{},imgSrc:"",height:"",dialogVisible:!1,businessObj:[],legalPersonObj:[],getSurveyRatingUrl:this.$store.state.complianceList.getSurveyRatingUrl,saveSurveyRatingUrl:this.$store.state.complianceList.saveSurveyRatingUrl,surveyRatingData:{},hideSubmit:JSON.parse(localStorage.getItem("hideSubmit")),ecc_csrf_token:this.$store.state.complianceList.ecc_csrf_token,current:0,isLoading:!1}},computed:{recordId:function(){return localStorage.getItem("previewRecordId")},summaryData:function(){var e=this.surveyRatingData.checkAgentDutyTeam?JSON.parse(this.surveyRatingData.checkAgentDutyTeam):"",t=[];if(console.log("teamData:",e),e)for(var a in e)t=t.concat([{title:"姓名",value:e[a].name,valueType:"text"},{title:"部门",value:e[a].department,valueType:"text"},{title:"主要职责 ",value:e[a].responsibility,valueType:"text"},{title:"高级管理人员职务 ",value:e[a].post?e[a].post:"",url:e[a].post?e[a].postUrl:"",valueType:"filesteam"}]);return[{h3Text:"经营状况",id:"OperatingConditions",list:[{title:"联系人",value:this.surveyRatingData.contactName,valueType:"text"},{title:"联系电话",value:this.surveyRatingData.contactTel,valueType:"text"},{title:"办公地址",value:this.surveyRatingData.worksiteAddress,valueType:"text"},{title:"法定代表人（负责人）工作年限",value:this.surveyRatingData.legalWorkYear,valueType:"text"},{title:"实缴货币资本(万元)",value:this.surveyRatingData.moneyCapital,valueType:"text"},{title:"法定代表人（负责人）学历",value:this.surveyRatingData.legalEducation,valText:["","硕士及以上","本科","大专","大专以下"],valueType:"select"},{title:"法定代表人（负责人）最高学历毕业时间",value:this.getGraduationDateForm(),valueType:"date"},{title:"法定代表人（负责人）最高学历毕业院校",value:this.surveyRatingData.legalCollege,valueType:"text"},{title:"法定代表人（负责人）最高学历毕业专业",value:this.surveyRatingData.legalMajor,valueType:"text"},{title:"法定代表人（负责人）不良信用记录次数",value:this.surveyRatingData.legalBadCreditNumber,valueType:"text"},{title:"学历在本科及以上的高级管理人员数量",value:this.surveyRatingData.managerNumber,valueType:"text"},{title:"控股股东名称",value:this.surveyRatingData.stockholderName,valueType:"text"},{title:"控股股东持股比例(%)",value:this.surveyRatingData.stockholderRatio,valueType:"text"},{title:"公司名称",value:this.surveyRatingData.companyName,valueType:"text"},{title:"公司类型",value:this.surveyRatingData.companyType,valText:["","国有企业","民营企业","个体企业","外资企业","港澳台企业、中外合资企业","其他"],valueType:"select"},{title:"营业执照注册号",value:this.surveyRatingData.companyCode,valueType:"text"},{title:"注册地址",value:this.surveyRatingData.businessLicensePlace,valueType:"text"},{title:"法定代表人（负责人）姓名",value:this.surveyRatingData.legalName,valueType:"text"},{title:"注册资本(万元)",value:this.surveyRatingData.registeredCapital,valueType:"text"},{title:"法定代表人（负责人）身份证号",value:this.surveyRatingData.legalCertificateCode,valueType:"text"},{title:"法定代表人（负责人）身份证影印件",name:"legalImage",value:this.surveyRatingData.legalImageUrl,valueType:"picture-card"},{title:"营业执照扫描件",name:"businessLicenseImage",value:this.surveyRatingData.businessLicenseImageUrl,valueType:"picture-card"}]},{h3Text:"管理团队",id:"ManagementTeam",list:t},{h3Text:"财务状况",id:"FinancialStatus",list:[{title:"注册资本是否为实缴货币",value:this.surveyRatingData.isRegisteredCapitalCoin,valueType:"radio"},{title:"财务报表是否经审计",value:this.surveyRatingData.isStatementAudit,valueType:"radio"},{title:"财务报表",value:this.surveyRatingData.financialStatementObj?this.surveyRatingData.financialStatementObj:"",url:this.surveyRatingData.financialStatementObj?this.surveyRatingData.financialStatementUrl:"",valueType:"files"},{title:"上一年度审计证明材料",value:this.surveyRatingData.evidenceObj?this.surveyRatingData.evidenceObj:"",url:this.surveyRatingData.evidenceObj?this.surveyRatingData.lastYearAuditUrl:"",valueType:"files"},{title:"上年现金流量比率(%)",value:this.surveyRatingData.lastYearCashRatio,valueType:"number"},{title:"上年长期资本负债率(%)",value:this.surveyRatingData.lastYearDebtRatio,valueType:"number"},{title:"上年应收帐周转率(%)",value:this.surveyRatingData.lastYearCapitalRatio,valueType:"number"},{title:"上年净资产增长率(%)",value:this.surveyRatingData.lastYearAccountRatio,valueType:"number"},{title:"上年经营净利率(%)",value:this.surveyRatingData.lastYearGainRatio,valueType:"number"},{title:"上年总收入(万元)",value:this.surveyRatingData.lastYearIncoming,valueType:"number"},{title:"上年净利润(万元)",value:this.surveyRatingData.lastYearProfit,valueType:"number"},{title:"资产负债率(%)",value:this.surveyRatingData.capitalDebtRatio,valueType:"number"},{title:"资产总额(万元)",value:this.surveyRatingData.totalCapital,valueType:"number"},{title:"交税总额(万元)",value:this.surveyRatingData.totalTax,valueType:"number"}]},{h3Text:"内控水平",id:"InternalControl",list:[{title:"是否有健全的组织架构",value:this.surveyRatingData.isOrganizationSound,valueType:"radio"},{title:"是否有健全的内控制度",value:this.surveyRatingData.isInternalControlSound,valueType:"radio"},{title:"是否有健全的反洗钱制度",value:this.surveyRatingData.isAntiMoneyLaundering,valueType:"radio"},{title:"是否有健全的业务和风险管理制度",value:this.surveyRatingData.isRiskManagementSound,valueType:"radio"},{title:"是否有健全的信息安全和保密管理机制",value:this.surveyRatingData.isSecuritySound,valueType:"radio"},{title:"是否有业务运行紧急预案",value:this.surveyRatingData.isEmergencySound,valueType:"radio"},{title:"是否有完善的服务体系和服务支持能力",value:this.surveyRatingData.isSupportSound,valueType:"radio"}]},{h3Text:"信用状况",id:"CreditStatus",list:[{title:"上年是否涉诉重大诉讼案件",value:"1"==this.surveyRatingData.isMajorLitigation?"是":"否",valueType:"number"},{title:"上年涉诉案件数量",value:this.surveyRatingData.litigationNumber,valueType:"number"},{title:"上年涉诉案件金额(万元)",value:this.surveyRatingData.litigationMoney,valueType:"number"},{title:"上年未执行案件数量",value:this.surveyRatingData.undoneLitigationNumber,valueType:"number"},{title:"上年未执行案件金额(万元)",value:this.surveyRatingData.undoneLitigationMoney,valueType:"number"}]},{h3Text:"专业能力",id:"ProfessionalCompetence",list:[{title:"合同开始时间",value:this.getRatingDateForm(),valueType:"date"},{title:"业务合作范围",value:this.surveyRatingData.cooperationScope,valText:["","聚合支付服务","特约商户推荐","受理终端布放","受理标识张贴","特约商户培训","特约商户巡检","受理终端维护","受理终端巡检","耗材配送","特约商户调单","11"==this.surveyRatingData.cooperationScope?this.surveyRatingData.otherBusiness:"其他业务"],valueType:"select"},{title:"合作地域",value:this.surveyRatingData.cooperationPlace,valueType:"text"},{title:"从事外包服务人员数量",value:this.surveyRatingData.serviceStaffNumber,valueType:"number"},{title:"当前维护的商户数量",value:this.surveyRatingData.merchantNumber,valueType:"number"},{title:"当前维护的机具数量",value:this.surveyRatingData.machineNumber,valueType:"number"},{title:"公司从业年限",value:this.surveyRatingData.companyWorkYear,valueType:"number"},{title:"合格高级管理人数",value:this.surveyRatingData.seniorManagerNumber,valueType:"number"},{title:"服务的支付机构数量",value:this.surveyRatingData.institutionNumber,valueType:"number"},{title:"当前服务的支付机构",value:this.surveyRatingData.institutionName,valueType:"text"}]},{h3Text:"业务合规",id:"BusinessCompliance",list:[{title:"合规工作人数",value:this.surveyRatingData.conformanceStaffNumber,valueType:"number"},{title:"是否建立合规管理部门",value:this.surveyRatingData.isConformanceDepartment,valueType:"radio"},{title:"是否建立合规管理制度",value:this.surveyRatingData.isConformanceRegulation,valueType:"radio"},{title:"是否建立合规管理流程",value:this.surveyRatingData.isConformanceProcess,valueType:"radio"},{title:"是否具有标准的合规管理文本",value:this.surveyRatingData.isConformanceText,valueType:""==this.surveyRatingData.isConformanceText?"text":"radio"}]},{h3Text:"个人信息保护",id:"PersonalInfoProtection",list:[{title:"是否取得相关安全测评认证",value:this.surveyRatingData.isSecurityAttestation,valueType:"radio"},{title:"是否建立完善的信息管理及保密制度",value:this.surveyRatingData.isInformationManagement,valueType:"radio"},{title:"是否建立信息管理流程",value:this.surveyRatingData.isInformationProcess,valueType:"radio"},{title:"员工是否签订保密协议",value:this.surveyRatingData.isStaffMaintainSecrecy,valueType:"radio"},{title:"系统管理是否采取分级授权",value:this.surveyRatingData.isHierachicalAuthorize,valueType:"radio"},{title:"信息是否进行加密存储",value:this.surveyRatingData.isInfomationEncryption,valueType:"radio"},{title:"是否每年开展信息安全审计",value:this.surveyRatingData.isSecrecyAudit,valueType:"radio"},{title:"是否每半年开展信息安全隐患排查",value:this.surveyRatingData.isSecrecyDangerCheck,valueType:"radio"}]},{h3Text:"风控能力",id:"RiskControlAbility",list:[{title:"是否制定年度应急演练计划",value:this.surveyRatingData.isPlanElmergencyDrill,valueType:"radio"},{title:"是否按计划开展应急演练",value:this.surveyRatingData.isLaunchElmergencyDrill,valueType:"radio"},{title:"是否建立完善的突发事件处理制度",value:this.surveyRatingData.isEmergencyHandle,valueType:"radio"},{title:"是否对商户进行巡检",value:this.surveyRatingData.isCheckMch,valueType:"radio"},{title:"是否对商户进行培训",value:this.surveyRatingData.isTrainMch,valueType:"radio"},{title:"是否发生过风险事件",value:this.surveyRatingData.isRiskHappened,valueType:"radio"}]},{h3Text:"其他",id:"OtherComments",list:[{title:"服务商意见",value:this.surveyRatingData.agentSuggestion,valueType:"textarea"}]}]}},created:function(){var e=this,t=JSON.parse(localStorage.getItem("surveyRatingData"))||{};if(t.recordId!==this.recordId){var a={recordId:this.recordId};this.$axios.get(this.getSurveyRatingUrl,{params:a}).then(function(t){if(console.log("请求成功",t),t&&t.data&&"0"===t.data.return_code){var a=t.data.list;""!==a.contractStartTime&&void 0!==a.contractStartTime&&(e.summaryData[0].list[6].value=a.contractStartTime.split(" ",1)[0]),""!==a.legalGraduationTime&&void 0!==a.legalGraduationTime&&(e.summaryData[5].list[0].value=a.legalGraduationTime.split(" ",1)[0]),a.recordId=e.recordId,a.statusId=localStorage.getItem("statusId"),""!==a.financialStatementUrl&&(a.financialStatementObj=JSON.parse(a.financialStatementUrl)),""!==a.lastYearAuditUrl&&"[]"!==a.lastYearAuditUrl&&(a.evidenceObj=JSON.parse(a.lastYearAuditUrl)),e.surveyRatingData=a,a.legalPersonObj=e.legalPersonObj=""!==e.surveyRatingData.legalImageUrl?JSON.parse(e.surveyRatingData.legalImageUrl):"",a.businessObj=e.businessObj=""!==e.surveyRatingData.businessLicenseImageUrl?JSON.parse(e.surveyRatingData.businessLicenseImageUrl):"","1"===e.summaryData[8].list[5].value&&(e.summaryData[8].list=e.summaryData[8].list.concat([{title:"发生风险事件数量",value:e.surveyRatingData.riskHappenedNumber,valueType:"number"},{title:"拓展商户是否发生风险事件",value:e.surveyRatingData.isMchRiskHappened,valueType:"radio"},{title:"涉及欺诈交易金额(万元)",value:e.surveyRatingData.swindleMoney,valueType:"number"},{title:"收单欺诈率(%)",value:e.surveyRatingData.swindleRatio,valueType:"number"}])),localStorage.setItem("surveyRatingData",d()(a))}else e.$message.closeAll(),e.$message({message:"登录超时，请刷新页面重新登录",type:"error",center:!0})}).catch(function(t){e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})})}else this.surveyRatingData=t,this.legalPersonObj=this.surveyRatingData.legalPersonObj,this.businessObj=this.surveyRatingData.businessObj,"1"===this.summaryData[8].list[5].value&&(this.summaryData[8].list=this.summaryData[8].list.concat([{title:"发生风险事件数量",value:this.surveyRatingData.riskHappenedNumber,valueType:"number"},{title:"拓展商户是否发生风险事件",value:this.surveyRatingData.isMchRiskHappened,valueType:"radio"},{title:"涉及欺诈交易金额(万元)",value:this.surveyRatingData.swindleMoney,valueType:"number"},{title:"收单欺诈率(%)",value:this.surveyRatingData.swindleRatio,valueType:"number"}]))},mounted:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{privueImg:function(e){this.imgSrc="",this.height=700;var t=new Image;t.src=e;var a=this;t.onload=function(){var i=t.height?t.height:600,s=t.width?t.width:600;console.log("heighty:",i),console.log("width:",s),a.height=i/s*700,a.imgSrc=e},this.dialogVisible=!0},getGraduationDateForm:function(){var e=this.surveyRatingData.legalGraduationTime;return console.log("legalGraduationTime:",e),""!==e&&void 0!==e&&(e=e.split(" ",1)[0]),e},getRatingDateForm:function(){var e=this.surveyRatingData.contractStartTime;return console.log("contractStartTime:",e),""!==e&&void 0!==e&&(e=e.split(" ",1)[0]),e},this_scroll:function(e,t){this.current=e,document.getElementById(t).scrollIntoView()},handleScroll:function(){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;e>0&&e<document.getElementById("ManagementTeam").offsetTop?this.current=0:e>=document.getElementById("ManagementTeam").offsetTop&&e<document.getElementById("FinancialStatus").offsetTop?this.current=1:e>=document.getElementById("FinancialStatus").offsetTop&&e<document.getElementById("InternalControl").offsetTop?this.current=2:e>=document.getElementById("InternalControl").offsetTop&&e<document.getElementById("CreditStatus").offsetTop?this.current=3:e>=document.getElementById("CreditStatus").offsetTop&&e<document.getElementById("ProfessionalCompetence").offsetTop?this.current=4:e>=document.getElementById("ProfessionalCompetence").offsetTop&&e<document.getElementById("BusinessCompliance").offsetTop?this.current=5:e>=document.getElementById("BusinessCompliance").offsetTop&&e<document.getElementById("PersonalInfoProtection").offsetTop?this.current=6:e>=document.getElementById("PersonalInfoProtection").offsetTop&&e<document.getElementById("RiskControlAbility").offsetTop?this.current=7:e>=document.getElementById("RiskControlAbility").offsetTop&&e<document.getElementById("OtherComments").offsetTop?this.current=8:e>=document.getElementById("OtherComments").offsetTop&&e<document.getElementById("myScrollspy").offsetTop?this.current=9:e>=document.getElementById("myScrollspy").offsetTop&&(this.current=10)},SaveSubmit:function(){var e=this;if("0"!=this.surveyRatingData.companyType)if(""!=this.surveyRatingData.contactName)if(""!=this.surveyRatingData.contactTel)if(""!=this.surveyRatingData.legalImage)if(""!=this.surveyRatingData.businessLicenseImage)if(""!=this.surveyRatingData.companyName)if(""!=this.surveyRatingData.companyCode)if(""!=this.surveyRatingData.businessLicensePlace)if(""!=this.surveyRatingData.legalName)if(""!=this.surveyRatingData.legalCertificateCode)if(""!=this.surveyRatingData.financialStatement)if("1"!=this.surveyRatingData.isMajorLitigation||""!=this.surveyRatingData.litigationNumber)if("1"!=this.surveyRatingData.isMajorLitigation||""!=this.surveyRatingData.litigationMoney)if("1"!=this.surveyRatingData.isMajorLitigation||""!=this.surveyRatingData.undoneLitigationNumber)if("1"!=this.surveyRatingData.isMajorLitigation||""!=this.surveyRatingData.undoneLitigationMoney)if(""!=this.surveyRatingData.contractStartTime)if(""!=this.surveyRatingData.cooperationScope)if(""!=this.surveyRatingData.cooperationPlace)if(""!=this.surveyRatingData.otherBusiness||"11"!=this.surveyRatingData.cooperationScope)if(""!=this.surveyRatingData.serviceStaffNumber)if(""!=this.surveyRatingData.merchantNumber)if(""!=this.surveyRatingData.machineNumber)if(""!=this.surveyRatingData.companyWorkYear)if(""!=this.surveyRatingData.seniorManagerNumber)if(""!=this.surveyRatingData.conformanceStaffNumber)if("1"!=this.surveyRatingData.isRiskHappened||""!=this.surveyRatingData.riskHappenedNumber)if("1"!=this.surveyRatingData.isRiskHappened||""!=this.surveyRatingData.swindleMoney)if("1"!=this.surveyRatingData.isRiskHappened||""!=this.surveyRatingData.swindleRatio){this.isLoading=!0;var t=new FormData;for(var a in this.surveyRatingData)t.append(a,this.surveyRatingData[a]);t.append("ecc_csrf_token",this.ecc_csrf_token);this.$axios.post(this.saveSurveyRatingUrl,t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log("请求成功",t),e.isLoading=!1,t&&t.data&&"0"===t.data.return_code?(sessionStorage.setItem("submitStatus",!0),e.$router.push("ResultSubmitted")):(console.log("请求失败:",t),sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"登录超时请刷新页面重新登录",type:"error",center:!0}))}).catch(function(t){console.log("请求出错",t),e.isLoading=!1,sessionStorage.setItem("submitStatus",!1),e.$message.closeAll(),e.$message({message:"请求超时,请刷新页面重试",type:"error",center:!0})});null}else this.$message.error("请填写风控能力的收单欺诈率");else this.$message.error("请填写风控能力的涉及欺诈交易金额");else this.$message.error("请填写风控能力的发生风险事件数量");else this.$message.error("请填写业务合规的合规工作人数");else this.$message.error("请填写专业能力的合格高级管理人数");else this.$message.error("请填写专业能力的公司从业年限");else this.$message.error("请填写专业能力的当前维护的机具数量");else this.$message.error("请填写专业能力的当前维护的商户数量");else this.$message.error("请填写专业能力的从事外包服务人员数量");else this.$message.error("请填写专业能力的其他业务范围");else this.$message.error("请输入专业能力的业务合作地域");else this.$message.error("请选择专业能力的业务合作范围");else this.$message.error("请输入专业能力的合同开始时间");else this.$message.error("请输入信用状况的上年未执行案件金额");else this.$message.error("请输入信用状况的上年未执行案件数量");else this.$message.error("请输入信用状况的上年涉诉案件金额");else this.$message.error("请输入信用状况的上年涉诉案件数量");else this.$message.error("请上传财务状况的财务报表");else this.$message.error("请输入经营状况的法定代表人（负责人）身份证号");else this.$message.error("请输入经营状况的法定代表人（负责人）姓名");else this.$message.error("请输入经营状况的注册地址");else this.$message.error("请输入经营状况的营业执照注册号");else this.$message.error("请输入经营状况的公司名称");else this.$message.error("请上传经营状况的营业执照扫描件");else this.$message.error("请上传经营状况的法定代表人（负责人）证件影印件");else this.$message.error("请输入经营状况的联系电话");else this.$message.error("请输入经营状况的联系人姓名");else this.$message.error("请选择经营状况的公司类型")}}},Fe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"survey-rating-preview"},[a("h2",{staticClass:"sub-heading"},[e._v("尽职调查/评级预览")]),e._v(" "),e._l(e.summaryData,function(t,i){return a("div",{key:i,staticClass:"preview-main",attrs:{id:t.id}},[a("h3",{staticClass:"sub-heading"},[e._v(e._s(t.h3Text))]),e._v(" "),a("InputComponent",{attrs:{"form-data":t.list,"is-input":!1}}),e._v(" "),e._l(t.list,function(t,i){return a("div",{key:i,staticClass:"preview-item stonPar"},[20===i?a("strong",{staticClass:"ston"},[e._v("法定代表人（负责人）证件影印件")]):e._e(),e._v(" "),20===i?a("div",{staticClass:"stonDiv"},e._l(e.legalPersonObj,function(t,i){return a("img",{key:i,staticClass:"elimage",attrs:{title:"法定代表人（负责人）证件影印件",src:t.url},on:{click:function(a){return e.privueImg(t.url)}}})}),0):e._e(),e._v(" "),21===i?a("strong",{staticClass:"ston"},[e._v("营业执照扫描件")]):e._e(),e._v(" "),21===i?a("div",e._l(e.businessObj,function(t,s){return 21===i?a("img",{key:s,staticClass:"elimage",attrs:{title:"营业执照扫描件",src:t.url},on:{click:function(a){return e.privueImg(t.url)}}}):e._e()}),0):e._e()])})],2)}),e._v(" "),a("div",{staticClass:"fast-anchor",attrs:{id:"myScrollspy"}},[a("div",{staticClass:"anchor-scroll"},[a("div",{staticClass:"anchor-cnt"},[a("ul",{staticClass:"anchor-list"},e._l(e.summaryData,function(t,i){return a("li",{key:i,staticClass:"anchor-item",class:{active:i==e.current}},[a("a",{staticClass:"title-link",attrs:{href:"javascript:;"},on:{click:function(a){return e.this_scroll(i,t.id)}}},[a("i",{staticClass:"title-icon"}),e._v(e._s(t.h3Text))])])}),0)])])]),e._v(" "),a("ControlButton",{attrs:{type:"ConfirmSubmit","is-disabled":!1,"is-loading":e.isLoading,"hide-submit":e.hideSubmit,"save-submit":e.SaveSubmit}}),e._v(" "),a("el-dialog",{attrs:{id:"imgRate",visible:e.dialogVisible,"show-close":!1,"close-on-click-modal":!0,width:"700px",height:e.height},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{src:e.imgSrc,alt:"",width:"700px",height:e.height}})])],2)},staticRenderFns:[]};var Oe=a("VU/8")(xe,Fe,!1,function(e){a("RszQ"),a("ODmY")},null,null).exports,$e={name:"ResultSubmitted",components:{},data:function(){return{msg:"请等待平台审核, 预计1-2日完成审核",nextPath:""}},computed:{status:function(){return sessionStorage.getItem("submitStatus")}},methods:{Toback:function(){this.status?this.$router.push("/serviceProvideCheck"):this.$router.go(-1)}}},we={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-submitted"},[a("h2",{staticClass:"sub-heading"}),e._v(" "),a("div",{staticClass:"result-submitted-main"},[a("div",{staticClass:"msg-icon",class:e.status?"success":"error"}),e._v(" "),a("h3",[e._v(e._s(e.status?"提交成功":"提交驳回"))]),e._v(" "),a("p",[e._v(e._s(e.msg))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.Toback}},[e._v(e._s(e.status?"返回首页":"返回修改"))])],1)])},staticRenderFns:[]};var Pe=a("VU/8")($e,we,!1,function(e){a("xVnQ"),a("t2kE")},"data-v-3c9597f3",null).exports,je={name:"ResultAudit",components:{},data:function(){return{msg:localStorage.getItem("FRejectReason"),nextPath:""}},computed:{status:function(){return sessionStorage.getItem("submitStatus")}},methods:{Toback:function(){var e="1"===localStorage.getItem("pushType")?"InspectionList":"SurveyRating";this.$router.push(e)}}},Ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-submitted"},[a("h2",{staticClass:"sub-heading"}),e._v(" "),a("div",{staticClass:"result-submitted-main"},[a("div",{staticClass:"msg-icon"}),e._v(" "),a("h3",[e._v("提交驳回")]),e._v(" "),a("p",{staticClass:"audiomsg"},[e._v("驳回原因："+e._s(e.msg))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.Toback}},[e._v("返回修改")])],1)])},staticRenderFns:[]};var Ue=a("VU/8")(je,Ne,!1,function(e){a("4H7A"),a("UvR9")},"data-v-3e3eb9e5",null).exports;i.default.use(r.a);var qe=new r.a({mode:"history",base:"/index.php/xphp/ccagentcheck/",routes:[{path:"/serviceProvideCheck",name:"ComplianceHomepage",component:p},{path:"/InspectionList",name:"InspectionList",component:S},{path:"/QualificationInfo",name:"QualificationInfo",component:T},{path:"/EnterpriseInfo",name:"EnterpriseInfo",component:P},{path:"/InspectionPhotos",name:"InspectionPhotos",component:U},{path:"/InspectionListPreview",name:"InspectionListPreview",component:V},{path:"/SurveyRating",name:"SurveyRating",component:H},{path:"/OperatingConditions",name:"OperatingConditions",component:te},{path:"/ManagementTeam",name:"ManagementTeam",component:se},{path:"/FinancialStatus",name:"FinancialStatus",component:le},{path:"/InternalControl",name:"InternalControl",component:ce},{path:"/CreditStatus",name:"CreditStatus",component:ve},{path:"/ProfessionalCompetence",name:"ProfessionalCompetence",component:he},{path:"/BusinessCompliance",name:"BusinessCompliance",component:be},{path:"/PersonalInfoProtection",name:"PersonalInfoProtection",component:Se},{path:"/RiskControlAbility",name:"RiskControlAbility",component:Ie},{path:"/OtherComments",name:"OtherComments",component:Te},{path:"/SurveyRatingPreview",name:"SurveyRatingPreview",component:Oe},{path:"/ResultSubmitted",name:"ResultSubmitted",component:Pe},{path:"/ResultAudit",name:"ResultAudit",component:Ue}]}),Ee=(a("j1ja"),a("R4Nx")),Me=a.n(Ee),Ae=a("nFce"),Be=a.n(Ae),Ve=a("NYxO"),Je={state:{complianceUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/getServiceProvide?ishttp=1",getInspectionUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/getCheckAgentInspection?ishttp=1",saveInspectionUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/saveServiceProvide?ishttp=1",fileUploadUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/uploadImage?ishttp=1",getSurveyRatingUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/getCheckAgentDuty?ishttp=1",saveSurveyRatingUrl:"https://pay.weixin.qq.com/index.php/xphp/ccagentcheck/saveCheckAgentDuty?ishttp=1",ecc_csrf_token:u.getCookie("ecc_csrf_cookie"),previewRecordId:localStorage.getItem("previewRecordId")},getters:{},mutations:{setPreviewRecordId:function(e,t){e.previewRecordId=t}},actions:{savePreviewRecordId:function(e,t){e.state,(0,e.commit)("setPreviewRecordId",t)}}},Ye={state:{legalPersonFile:[],mechanismFile:[],enterpriseUnfillData:[],enterpriseFillData:[],inspectionPhotos:[]},getters:{},mutations:{setLegalPersonFile:function(e,t){e.legalPersonFile=t},setMechanismFile:function(e,t){e.mechanismFile=t},setEnterpriseUnfillData:function(e,t){e.enterpriseUnfillData=t},setEnterpriseFillData:function(e,t){e.enterpriseFillData=t}},actions:{saveLegalPersonFile:function(e,t){e.state,(0,e.commit)("setLegalPersonFile",t)},saveMechanismFile:function(e,t){e.state,(0,e.commit)("setMechanismFile",t)},saveEnterpriseUnfillData:function(e,t){e.state,(0,e.commit)("setEnterpriseUnfillData",t)},saveEnterpriseFillData:function(e,t){e.state,(0,e.commit)("setEnterpriseFillData",t)}}};i.default.use(Ve.a);var He=new Ve.a.Store({modules:{complianceList:Je,inspectionListData:Ye}}),Ge=a("//Fk"),ze=a.n(Ge),We=a("mtWM"),Qe=a.n(We);a("2cVt"),a("lSy/"),a("yvJy");i.default.use(r.a),i.default.use(Me.a,{ekyrinLocale:Be.a}),i.default.prototype.$axios=(Qe.a.defaults.timeout=1e4,Qe.a.defaults.withCredentials=!0,Qe.a.interceptors.request.use(function(e){return e},function(e){console.log(e)}),Qe.a.interceptors.response.use(function(e){return e},function(e){console.log(e),("ECONNABORTED"===e.code||"Network Error"===e.message||e.message.includes("timeout"))&&ze.a.reject(e)}),Qe.a),i.default.prototype.$UTIL=u,i.default.config.productionTip=!1,new i.default({el:"#app",router:qe,store:He,components:{App:n},template:"<App/>"})},Ne81:function(e,t){},ODmY:function(e,t){},PWhF:function(e,t){},RszQ:function(e,t){},SBC5:function(e,t){},UvR9:function(e,t){},V4EN:function(e,t){},VNk9:function(e,t){},VViQ:function(e,t){},VW7R:function(e,t){},"Z/SZ":function(e,t){},"fI+M":function(e,t){},gfGv:function(e,t){},"kO+K":function(e,t){},kd7V:function(e,t){},kdVE:function(e,t){},kttv:function(e,t){},"lSy/":function(e,t){},"lxH/":function(e,t){},oAPB:function(e,t){},oo8R:function(e,t){},se9x:function(e,t){},t2kE:function(e,t){},ws7m:function(e,t){},x1X6:function(e,t){},xVnQ:function(e,t){},y4IC:function(e,t){},ySVD:function(e,t){},ySgR:function(e,t){},yvJy:function(e,t){},yyIf:function(e,t){}},[0]);
//# sourceMappingURL=app.901b948a198c87a2e8ad.js.map